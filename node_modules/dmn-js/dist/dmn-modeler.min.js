/*! dmn-js - dmn-modeler v0.1.0 | (c) 2015 camunda Services GmbH | bpmn.io/license */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.DmnJS=e()}}(function(){var e;return function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";function o(e){r.call(this,e)}var i=e(80),r=e(2);i(o,r),o.prototype._modelingModules=[e(223),e(33),e(10),e(227)],o.prototype._modules=[].concat(o.prototype._modules,o.prototype._modelingModules),t.exports=o},{10:10,2:2,223:223,227:227,33:33,80:80}],2:[function(e,t,n){"use strict";function o(e,t){var n=e.get("eventBus");t.forEach(function(e){n.on(e.event,e.handler)}),n.on("table.destroy",function(){_.prototype._openedDropdown&&_.prototype._openedDropdown._closeDropdown()})}function i(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid DMN file"+n[2]),e}function r(e){return e+(l(e)?"px":"")}function s(e){this.options=e=a({},x,e||{});var t=e.container;t.get&&(t=t.get(0)),u(t)&&(t=d(t));var n=this.container=p('<div class="dmn-table"></div>');t.appendChild(n),a(n.style,{width:r(e.width),height:r(e.height),position:e.position})}var a=e(176),c=e(179),u=e(174),l=e(172),p=e(188),d=e(191),f=e(192),h=e(201),m=e(59),y=e(61),g=e(78),v=e(41),_=e(215),x={width:"100%",position:"relative",container:"body"};s.prototype.importXML=function(e,t){var n=this;this.moddle=this.createModdle(),this.moddle.fromXML(e,"dmn:Definitions",function(e,o,r){if(e)return e=i(e),t(e);var s=r.warnings;n.importDefinitions(o,function(e,n){return e?t(e):void t(null,s.concat(n||[]))})})},s.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this.definitions;return n?void this.moddle.toXML(n,e,t):t(new Error("no definitions loaded"))},s.prototype.createModdle=function(){var e=new m(this.options.moddleExtensions);return y.extend(e,new g([32,36,1])),e},s.prototype.get=function(e){if(!this.table)throw new Error("no table loaded");return this.table.get(e)},s.prototype.invoke=function(e){if(!this.table)throw new Error("no table loaded");return this.table.invoke(e)},s.prototype.importDefinitions=function(e,t){try{this.table&&this.clear(),this.definitions=e;var n=this.table=this._createTable(this.options);this._init(n),v.importDmnTable(n,e,t)}catch(o){t(o)}},s.prototype._init=function(e){o(e,this.__listeners||[])},s.prototype._createTable=function(e){var t=[].concat(e.modules||this.getModules(),e.additionalModules||[]);return t.unshift({dmnjs:["value",this],moddle:["value",this.moddle]}),e=c(e,"additionalModules"),e=a(e,{sheet:{container:this.container},modules:t}),new h(e)},s.prototype.getModules=function(){return this._modules},s.prototype.clear=function(){var e=this.table;e&&e.destroy(),delete this.table},s.prototype.destroy=function(){this.clear(),f(this.container)},s.prototype.on=function(e,t){var n=this.table,o=this.__listeners=this.__listeners||[];o.push({event:e,handler:t}),n&&n.get("eventBus").on(e,t)},s.prototype._modules=[e(3),e(229),e(22),e(35),e(8),e(25),e(38),e(15),e(18),e(225),e(219),e(217)],t.exports=s},{15:15,172:172,174:174,176:176,179:179,18:18,188:188,191:191,192:192,201:201,215:215,217:217,219:219,22:22,225:225,229:229,25:25,3:3,35:35,38:38,41:41,59:59,61:61,78:78,8:8}],3:[function(e,t,n){t.exports={__depends__:[e(43),e(5)]}},{43:43,5:5}],4:[function(e,t,n){"use strict";function o(e){e.on("row.render",function(e){e.data.isClauseRow&&i(e.gfx).add("labels")}),e.on("cell.render",function(e){var t=e.data,n=e.gfx;t.column.businessObject&&(t.row.isClauseRow?n.childNodes[0].textContent=t.column.businessObject.name:t.content&&!t.content.tagName&&t.row.businessObject&&(n.childNodes[0].textContent=t.content.text),t.row.isFoot||(t.column.businessObject.inputExpression?i(n).add("input"):i(n).add("output")))})}var i=e(185);o.$inject=["eventBus"],t.exports=o},{185:185}],5:[function(e,t,n){t.exports={__init__:["dmnRenderer"],dmnRenderer:["type",e(4)]}},{4:4}],6:[function(e,t,n){"use strict";function o(e,t,n,o){this.column=null;var r=this;e.on("import.success",function(s){e.fire("annotations.add",s),r.column=t.addColumn({id:"annotations",isAnnotationsColumn:!0});var a=n.filter(function(e){return"cell"===e._type&&e.column===r.column&&e.row.isLabelRow})[0];a.rowspan=4,a.content=i('<a href="http://bpmn.io" class="dmn-js-logo"></a>Annotation'),o.update("column",r.column,n.getGraphics(r.column.id)),e.fire("annotations.added",r.column)}),e.on("sheet.destroy",function(n){e.fire("annotations.destroy",r.column),t.removeColumn({id:"annotations"}),e.fire("annotations.destroyed",r.column)})}var i=e(188);o.$inject=["eventBus","sheet","elementRegistry","graphicsFactory"],t.exports=o,o.prototype.getColumn=function(){return this.column}},{188:188}],7:[function(e,t,n){"use strict";function o(e,t){e.on("cell.render",function(e){e.data.column!==t.getColumn()||e.data.row.isFoot||(i(e.gfx).add("annotation"),e.data.row.isHead||(e.gfx.childNodes[0].textContent=e.data.row.businessObject.description||""))})}var i=e(185);o.$inject=["eventBus","annotations"],t.exports=o},{185:185}],8:[function(e,t,n){t.exports={__init__:["annotations","annotationsRenderer"],__depends__:[],annotations:["type",e(6)],annotationsRenderer:["type",e(7)]}},{6:6,7:7}],9:[function(e,t,n){"use strict";function o(e,t,n,o,i){this._popupMenu=e,this._eventBus=t,this._modeling=n,this._elementRegistry=o,this._selection=i;var r=this;t.on("element.contextmenu",function(e){e.element.row.isFoot||(e.preventDefault(),e.gfx.firstChild.focus(),r.open(e.originalEvent.pageX,e.originalEvent.pageY,e.element))});var s=function(e){e.preventDefault()};t.on("popupmenu.open",function(e){e.container.addEventListener("contextmenu",s)}),t.on("popupmenu.close",function(e){e.container.removeEventListener("contextmenu",s)}),document.addEventListener("click",function(e){r.close()})}var i=new(e(52))("table");e(87);o.$inject=["popupMenu","eventBus","modeling","elementRegistry","selection"],t.exports=o,o.prototype.getRuleActions=function(e){return{id:"rule",content:{label:"Rule",linkClass:"disabled",entries:[{id:"ruleAdd",action:this.ruleAddAction.bind(this,e),content:{label:"add",icon:"plus",entries:[{id:"ruleAddAbove",content:{label:"",icon:"above"},action:this.ruleAddAction.bind(this,e,"above")},{id:"ruleAddBelow",content:{label:"",icon:"below"},action:this.ruleAddAction.bind(this,e,"below")}]}},{id:"ruleRemove",content:{label:"remove",icon:"minus"},action:this.ruleRemoveAction.bind(this,e)},{id:"ruleClear",content:{label:"clear",icon:"clear"},action:this.ruleClearAction.bind(this,e)}]}}};var r=function(e){var t=e.businessObject.inputEntry?"inputEntry":"outputEntry";return!(e.next.businessObject&&e.next.businessObject[t]||e.previous.businessObject&&e.previous.businessObject[t])},s=function(){};o.prototype.getInputActions=function(e){var t=r(e.column);return{id:"clause",content:{label:"Input",linkClass:"disabled",icon:"input",entries:[{id:"clauseAdd",action:this.clauseAddAction.bind(this,e),content:{label:"add",icon:"plus",entries:[{id:"clauseAddLeft",content:{label:"",icon:"left"},action:this.clauseAddAction.bind(this,e,"left")},{id:"clauseAddRight",content:{label:"",icon:"right"},action:this.clauseAddAction.bind(this,e,"right")}]}},{id:"clauseRemove",content:{label:"remove",icon:"minus",linkClass:t?"disabled":""},action:t?s:this.clauseRemoveAction.bind(this,e)}]}}},o.prototype.getOutputActions=function(e){var t=r(e.column);return{id:"clause",content:{label:"Output",linkClass:"disabled",icon:"output",entries:[{id:"clauseAdd",action:this.clauseAddAction.bind(this,e),content:{label:"add",icon:"plus",entries:[{id:"clauseAddLeft",content:{label:"",icon:"left"},action:this.clauseAddAction.bind(this,e,"left")},{id:"clauseAddRight",content:{label:"",icon:"right"},action:this.clauseAddAction.bind(this,e,"right")}]}},{id:"clauseRemove",content:{label:"remove",icon:"minus",linkClass:t?"disabled":""},action:t?s:this.clauseRemoveAction.bind(this,e)}]}}},o.prototype.getActions=function(e){var t=[];return e.row.businessObject&&!e.row.businessObject.$instanceOf("dmn:DecisionTable")&&t.push(this.getRuleActions(e)),"utilityColumn"===e.column.id||"annotations"===e.column.id||e.row.isLabelRow||(e.column.businessObject.inputExpression?t.push(this.getInputActions(e)):t.push(this.getOutputActions(e))),t},o.prototype.open=function(e,t,n){var o=this.getActions(n);o.length>0&&this._popupMenu.open({position:{x:e,y:t},entries:o})},o.prototype.close=function(){this._popupMenu.close()},o.prototype.clauseRemoveAction=function(e){this._modeling.deleteColumn(e.column),this.close()},o.prototype.clauseAddAction=function(e,t){var n=e.column.businessObject.inputEntry?"inputEntry":"outputEntry",o=e.column;if("left"===t)o=o.previous;else if("right"!==t)for(;o.next&&o.next.businessObject[n];)o=o.next;var r={id:i.next(),previous:o,name:"",isInput:"inputEntry"===n};this._modeling.createColumn(r),this.close()},o.prototype.ruleRemoveAction=function(e){this._modeling.deleteRow(e.row),this.close()},o.prototype.ruleAddAction=function(e,t){var n={id:i.next()};"above"===t?n.next=e.row:"below"===t&&(n.previous=e.row),this._modeling.createRow(n),this.close()},o.prototype.ruleClearAction=function(e){this._modeling.clearRow(e.row),this.close()}},{52:52,87:87}],10:[function(e,t,n){t.exports={__init__:["contextMenu"],__depends__:[e(240)],contextMenu:["type",e(9)]}},{240:240,9:9}],11:[function(e,t,n){"use strict";function o(e){this._model=e}o.$inject=["moddle"],o.prototype._needsId=function(e){return e.$instanceOf("dmn:DMNElement")},o.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},o.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},o.prototype.createRule=function(e,t){t=t||{},t.condition=t.condition||[],t.conclusion=t.conclusion||[];var n=this.create(e,t);return n},o.prototype.createInputEntry=function(e,t,n){var o=this.create("dmn:LiteralExpression",{text:e});return o.$parent=t,t.inputEntry.push(o),n.condition.push(o),o},o.prototype.createInputClause=function(e){var t=this.create("dmn:Clause",{name:e});return t.inputEntry=[],t.inputExpression=this.create("dmn:LiteralExpression",{}),t.inputExpression.itemDefinition=this.create("dmn:DMNElementReference",{}),t},o.prototype.createOutputClause=function(e){var t=this.create("dmn:Clause",{name:e});return t.outputEntry=[],t.outputDefinition=this.create("dmn:DMNElementReference",{}),t},o.prototype.createOutputEntry=function(e,t,n){var o=this.create("dmn:LiteralExpression",{text:e});return o.$parent=t,t.outputEntry.push(o),n.conclusion.push(o),o},o.prototype.createItemDefinition=function(){var e=this.create("dmn:ItemDefinition",{typeDefinition:"string"});return e},o.prototype.createAllowedValue=function(e,t){var n=this.create("dmn:LiteralExpression",{text:e});return n.$parent=t,t.allowedValue=t.allowedValue||[],t.allowedValue.push(n),n},t.exports=o},{}],12:[function(e,t,n){"use strict";function o(e,t){r.call(this),this._moddle=e,this._dmnFactory=t}var i=e(80),r=e(203);i(o,r),o.$inject=["moddle","dmnFactory"],t.exports=o,o.prototype.baseCreate=r.prototype.create,o.prototype.create=function(e,t){t=t||{};var n=t.businessObject;if("row"===e?t.type="dmn:DecisionRule":"column"===e&&(t.type="dmn:Clause"),!n){if(!t.type)throw new Error("no type specified");"dmn:DecisionRule"===t.type?n=this._dmnFactory.createRule(t.type):"dmn:Clause"===t.type?t.isInput?(n=this._dmnFactory.createInputClause(t.name),n.inputExpression.itemDefinition.ref=this._dmnFactory.createItemDefinition(),n.inputExpression.itemDefinition.href="#"+n.inputExpression.itemDefinition.ref.id):(n=this._dmnFactory.createOutputClause(t.name),n.outputDefinition.ref=this._dmnFactory.createItemDefinition(),n.outputDefinition.href="#"+n.outputDefinition.ref.id):n=this._dmnFactory.create(t.type)}return t.businessObject=n,t.id=n.id,this.baseCreate(e,t)}},{203:203,80:80}],13:[function(e,t,n){t.exports={__init__:[],__depends__:[],dmnFactory:["type",e(11)],elementFactory:["type",e(12)]}},{11:11,12:12}],14:[function(e,t,n){"use strict";function o(e,t,n){this._sheet=t;var o=this;e.on("controls.init",function(r){e.on("controls.added",function(e){o._node=e.node,n.hideDetails&&o.hide()}),r.controls.addControl("Hide Details",function(){i(t.getContainer().parentNode).contains("hide-mappings")?o.show():o.hide()})})}var i=e(185);o.$inject=["eventBus","sheet","config"],t.exports=o,o.prototype.hide=function(){this._node&&(i(this._sheet.getContainer().parentNode).add("hide-mappings"),this._node.textContent="Show details")},o.prototype.show=function(){this._node&&(i(this._sheet.getContainer().parentNode).remove("hide-mappings"),this._node.textContent="Hide details")}},{185:185}],15:[function(e,t,n){t.exports={__init__:["hideTechControl"],__depends__:[],hideTechControl:["type",e(14)]}},{14:14}],16:[function(e,t,n){"use strict";function o(e,t,n,o,a,c){this.table=null,this.hitPolicyCell=null;var u=this;e.on("dmnElement.added",function(e){e.element&&e.element.businessObject.$instanceOf("dmn:DecisionTable")&&(u.table=e.element.businessObject)}),e.on("cell.added",function(e){if(e.element.column===t.getColumn()&&"ioLabel"===e.element.row.id){u.hitPolicyCell=e.element;var n=i("<div>"),o=new r({label:"Hit Policy",classNames:["dmn-combobox","hitpolicy"],options:["UNIQUE","FIRST","PRIORITY","ANY","COLLECT","RULE ORDER","OUTPUT ORDER"],dropdownClassNames:["dmn-combobox-suggestions"]});n.insertBefore(o.getNode(),n.firstChild);var s=new r({label:"Collect Operator",classNames:["dmn-combobox","operator"],options:["LIST","SUM","MIN","MAX","COUNT"],dropdownClassNames:["dmn-combobox-suggestions"]});n.appendChild(s.getNode()),o.addEventListener("valueChanged",function(e){"collect"===e.newValue.toLowerCase()?s.getNode().style.display="table":s.getNode().style.display="none"}),e.element.complex={className:"dmn-hitpolicy-setter",template:n,element:e.element,comboBox:o,operatorComboBox:s,type:"hitPolicy",offset:{x:42,y:-15}}}}),e.on("complexCell.open",function(e){if("hitPolicy"===e.config.type){e.config.comboBox.setValue(u.getHitPolicy()),e.config.operatorComboBox.setValue(u.getAggregation());var t=e.config.template;if(t.querySelector(".dmn-combobox > input").focus(),!c.allowed("hitPolicy.edit")){for(var n=t.querySelectorAll("input"),o=0;o<n.length;o++)n[o].setAttribute("disabled","true");e.config.comboBox.disable(),s(t.parentNode).add("read-only")}}}),e.on("complexCell.close",function(t){"hitPolicy"===t.config.type&&(e.fire("hitPolicy.edit",{table:u.table,hitPolicy:t.config.comboBox.getValue(),aggregation:"COLLECT"===t.config.comboBox.getValue()?t.config.operatorComboBox.getValue():void 0,cell:u.getCell()}),o.update("cell",u.getCell(),a.getGraphics(u.getCell())))})}var i=e(188),r=e(215),s=(e(176),e(185));o.$inject=["eventBus","utilityColumn","ioLabel","graphicsFactory","elementRegistry","rules"],o.prototype.getCell=function(){return this.hitPolicyCell},o.prototype.getHitPolicy=function(){return this.table&&this.table.hitPolicy||""},o.prototype.getAggregation=function(){return this.table&&this.table.aggregation||"LIST"},t.exports=o},{176:176,185:185,188:188,215:215}],17:[function(e,t,n){"use strict";function o(e){switch(e){case"LIST":return"";case"SUM":return"+";case"MIN":return"<";case"MAX":return">";case"COUNT":return"#"}}function i(e,t){e.on("cell.render",function(e){e.data===t.getCell()&&(e.gfx.childNodes[0].textContent=t.getHitPolicy().charAt(0)+o(t.getAggregation()))})}i.$inject=["eventBus","hitPolicy"],t.exports=i},{}],18:[function(e,t,n){t.exports={__init__:["hitPolicy","hitPolicyRenderer"],__depends__:[e(245),e(22)],hitPolicy:["type",e(16)],hitPolicyRenderer:["type",e(17)]}},{16:16,17:17,22:22,245:245}],19:[function(e,t,n){"use strict";function o(e,t,n,o,a){function c(t){if("column"===t._type){var c=n.filter(function(e){return"cell"===e._type&&e.row===u.row}),l=c.filter(function(e){return e.column.businessObject&&e.column.businessObject.inputExpression});r(l,function(t){if(!t.column.previous.businessObject){t.colspan=l.length;var n;a.allowed("column.create")?(n=i('Input <a class="icon-dmn icon-plus"></a>'),n.querySelector("a").addEventListener("mouseup",function(){for(var n=t.column.businessObject.inputEntry?"inputEntry":"outputEntry",o=t.column;o.next&&o.next.businessObject[n];)o=o.next;var i={id:s.next(),previous:o,name:"",isInput:"inputEntry"===n};e.fire("ioLabel.createColumn",{newColumn:i})})):n=i("Input"),t.content=n}});var p=c.filter(function(e){return e.column.businessObject&&e.column.businessObject.outputDefinition});r(p,function(t){if(t.column.previous.businessObject.inputExpression){t.colspan=p.length;var n;a.allowed("column.create")?(n=i('Output <a class="icon-dmn icon-plus"></a>'),n.querySelector("a").addEventListener("mouseup",function(){for(var n=t.column.businessObject.inputEntry?"inputEntry":"outputEntry",o=t.column;o.next&&o.next.businessObject&&o.next.businessObject[n];)o=o.next;var i={id:s.next(),previous:o,name:"",isInput:"inputEntry"===n};e.fire("ioLabel.createColumn",{newColumn:i})})):n=i("Output"),t.content=n}}),c.length>0&&o.update("row",c[0].row,n.getGraphics(c[0].row.id))}}this.row=null;var u=this;e.on("sheet.init",function(n){e.fire("ioLabel.add",n),u.row=t.addRow({id:"ioLabel",isHead:!0,isLabelRow:!0,useTH:!0}),e.fire("ioLabel.added",u.row)}),e.on("sheet.destroy",function(n){e.fire("ioLabel.destroy",u.row),t.removeRow({id:"ioLabel"}),e.fire("ioLabel.destroyed",u.row)}),e.on(["cells.added","cells.removed"],c);var l=null,p=function(){if(l&&u.row){var e=n.filter(function(e){return"cell"===e._type&&e.row===u.row&&e.column===l})[0];e.rowspan=4}};e.on("utilityColumn.added",function(e){l=e.column}),e.on(["utilityColumn.added","ioLabel.added"],function(e){p()})}var i=e(188),r=e(87),s=new(e(52))("clause");o.$inject=["eventBus","sheet","elementRegistry","graphicsFactory","rules"],t.exports=o,o.prototype.getRow=function(){return this.row}},{188:188,52:52,87:87}],20:[function(e,t,n){"use strict";function o(e,t){e.on("cell.render",function(e){e.data.row===t.getRow()&&e.data.content&&!e.gfx.childNodes[0].firstChild&&e.gfx.childNodes[0].appendChild(e.data.content)})}o.$inject=["eventBus","ioLabel"],t.exports=o},{}],21:[function(e,t,n){"use strict";function o(e,t){r.call(this,e),this._ioLabel=t}var i=e(80),r=e(48);i(o,r),o.$inject=["eventBus","ioLabel"],t.exports=o,o.prototype.init=function(){var e=this;this.addRule("cell.edit",function(t){return t.row===e._ioLabel.row?!1:void 0})}},{48:48,80:80}],22:[function(e,t,n){t.exports={__init__:["ioLabel","ioLabelRules","ioLabelRenderer"],__depends__:[],ioLabel:["type",e(19)],ioLabelRules:["type",e(21)],ioLabelRenderer:["type",e(20)]}},{19:19,20:20,21:21}],23:[function(e,t,n){"use strict";function o(e,t,n,o,c,u){this.row=null;var l=this;e.on("sheet.init",function(i){e.fire("mappingsRow.add",i),l.row=t.addRow({id:"mappingsRow",isHead:!0,isMappingsRow:!0}),e.fire("mappingsRow.added",l.row),o.update("row",l.row,n.getGraphics(l.row.id))}),e.on("sheet.destroy",function(n){e.fire("mappingsRow.destroy",l.row),t.removeRow({id:"mappingsRow"}),e.fire("mappingsRow.destroyed",l.row)});var p=function(e,o,i){var r=t.getRootElement();if(i){for(var a=r,c={x:0,y:0};a;)c.x+=a.offsetLeft,c.y+=a.offsetTop,a=a.offsetParent;for(a=u;a&&"number"==typeof a.scrollTop&&"number"==typeof a.scrollLeft;)c.x-=a.scrollLeft,c.y-=a.scrollTop,a=a.parentNode;s(e.style,{top:c.y+"px",left:c.x+"px",width:r.clientWidth+"px"})}else{for(var u=n.getGraphics(o),a=u,c={x:0,y:0};a;)c.x+=a.offsetLeft,c.y+=a.offsetTop,a=a.offsetParent;for(a=u;a&&"number"==typeof a.scrollTop&&"number"==typeof a.scrollLeft;)c.x-=a.scrollLeft,c.y-=a.scrollTop,a=a.parentNode;s(e.style,{left:c.x+2+"px",top:c.y-72+"px",width:"auto",height:"auto"})}};e.on("cell.added",function(e){if("mappingsRow"===e.element.row.id&&e.element.column.businessObject&&e.element.column.businessObject.inputExpression){e.element.content=e.element.column.businessObject.inputExpression;var t=i('<div>\n  <div class="links">\n    <div class="toggle-type">\n      <label>Use:</label>\n      <a class="expression">Expression</a>\n      /\n      <a class="script">Script</a>\n    </div>\n    <a class="icon-dmn icon-clear"></a>\n  </div>\n  <div class="expression region">\n    <label>Expression:</label>\n    <input placeholder="propertyName">\n  </div>\n  <div class="script region">\n    <textarea placeholder="return obj.propertyName;"></textarea>\n  </div>\n</div>\n'),s=new a({label:"Language",classNames:["dmn-combobox","language"],options:["Javascript","Groovy","Python","Ruby"],dropdownClassNames:["dmn-combobox-suggestions"]});"undefined"!=typeof e.element.content.expressionLanguage?(t.querySelector("textarea").value=e.element.content.text||"",s.setValue(e.element.content.expressionLanguage)):t.querySelector("input").value=e.element.content.text||"",t.querySelector(".icon-clear").addEventListener("click",function(){c.close()}),t.querySelector(".expression").addEventListener("click",function(){r(t.parentNode).remove("use-script"),p(t.parentNode,e.element,!1),t.querySelector(".expression.region > input").focus(),e.element.complex.mappingType="expression"}),t.querySelector(".script").addEventListener("click",function(){r(t.parentNode).add("use-script"),p(t.parentNode,e.element,!0),t.querySelector(".script.region > textarea").focus(),e.element.complex.mappingType="script"}),t.querySelector(".expression.region > input").addEventListener("keydown",function(e){13===e.keyCode&&c.close()}),t.querySelector(".script.region").insertBefore(s.getNode(),t.querySelector("textarea")),e.element.complex={className:"dmn-clauseexpression-setter",template:t,element:e.element,mappingType:"undefined"!=typeof e.element.content.expressionLanguage?"script":"expression",comboBox:s,type:"mapping",offset:{x:2,y:-72}},o.update("cell",e.element,n.getGraphics(e.element))}else"mappingsRow"===e.element.row.id&&e.element.column.businessObject&&(e.element.content=e.element.column.businessObject,o.update("cell",e.element,n.getGraphics(e.element)))}),e.on("complexCell.open",function(e){if("mapping"===e.config.type){var t=e.config.template;"undefined"!=typeof e.config.element.content.expressionLanguage?(e.config.mappingType="script",r(e.container).add("use-script"),p(e.container,e.config.element,!0),e.container.querySelector(".script.region > textarea").focus()):(e.config.mappingType="expression",e.container.querySelector(".expression.region > input").focus()),u.allowed("inputMapping.edit")||(t.querySelector(".expression.region > input").setAttribute("disabled","true"),t.querySelector(".script.region > textarea").setAttribute("disabled","true"),e.config.comboBox.disable(),r(t.parentNode).add("read-only"))}}),e.on("complexCell.close",function(t){if("mapping"===t.config.type){var n=t.config.template;"expression"===t.config.mappingType?e.fire("mappingsRow.editInputMapping",{element:t.config.element,expression:n.querySelector('input[placeholder="propertyName"]').value}):"script"===t.config.mappingType&&e.fire("mappingsRow.editInputMapping",{element:t.config.element,expression:n.querySelector("textarea").value,language:t.config.comboBox.getValue()})}})}var i=e(188),r=e(185),s=e(176),a=e(215);o.$inject=["eventBus","sheet","elementRegistry","graphicsFactory","complexCell","rules"],t.exports=o,o.prototype.getRow=function(){return this.row}},{176:176,185:185,188:188,215:215}],24:[function(e,t,n){"use strict";function o(e,t){e.on("row.render",function(e){e.data===t.getRow()&&i(e.gfx).add("mappings")}),e.on("cell.render",function(e){e.data.row===t.getRow()&&e.data.content&&e.data.column.businessObject.inputExpression?e.data.content.expressionLanguage?e.gfx.childNodes[0].textContent=e.data.content.expressionLanguage||"":e.gfx.childNodes[0].textContent=e.data.content.text||"":e.data.row===t.getRow()&&e.data.content&&(e.gfx.childNodes[0].textContent=e.data.content.output||"")})}var i=e(185);o.$inject=["eventBus","mappingsRow"],t.exports=o},{185:185}],25:[function(e,t,n){t.exports={__init__:["mappingsRow","mappingsRowRenderer"],__depends__:[e(217)],mappingsRow:["type",e(23)],mappingsRowRenderer:["type",e(24)]}},{217:217,23:23,24:24}],26:[function(e,t,n){"use strict";function o(e,t,n){function o(e){e.context.row.businessObject.$parent=n.get("decisionTable").businessObject,e.context.row.businessObject.$parent.rule||(e.context.row.businessObject.$parent.rule=[]),e.context.row.next?e.context.row.businessObject.$parent.rule.splice(e.context.row.businessObject.$parent.rule.indexOf(e.context.row.next.businessObject),0,e.context.row.businessObject):e.context.row.businessObject.$parent.rule.push(e.context.row.businessObject),e.context._cells&&r(e.context._cells,function(e){if(e.column.businessObject&&e.content){var t=e.column.businessObject.inputEntry||e.column.businessObject.outputEntry;-1===t.indexOf(e.content)&&t.push(e.content)}})}function i(e){e.context.column.businessObject.$parent=n.get("decisionTable").businessObject,e.context.column.next&&e.context.column.next.businessObject?e.context.column.businessObject.$parent.clause.splice(e.context.column.businessObject.$parent.clause.indexOf(e.context.column.next.businessObject),0,e.context.column.businessObject):e.context.column.businessObject.$parent.clause.push(e.context.column.businessObject),e.context._cells&&r(e.context._cells,function(e){if(!e.row.isHead&&!e.row.isFoot&&e.content){var t=e.row.businessObject[e.column.businessObject.inputExpression?"condition":"conclusion"];-1===t.indexOf(e.content)&&t.push(e.content)}});for(var t=e.context.column.businessObject;t&&!t.$instanceOf("dmn:Definitions");)t=t.$parent;e.context.column.businessObject.inputExpression?t.ItemDefinition.push(e.context.column.businessObject.inputExpression.itemDefinition.ref):t.ItemDefinition.push(e.context.column.businessObject.outputDefinition.ref)}function a(e){e.context.column.businessObject.$parent.clause.splice(e.context.column.businessObject.$parent.clause.indexOf(e.context.column.businessObject),1),c(e.context.column.businessObject.$parent.rule,e.context.column.businessObject);for(var t=e.context.column.businessObject;t&&!t.$instanceOf("dmn:Definitions");)t=t.$parent;e.context.column.businessObject.inputExpression?t.ItemDefinition.splice(t.ItemDefinition.indexOf(e.context.column.businessObject.inputExpression.itemDefinition.ref),1):t.ItemDefinition.splice(t.ItemDefinition.indexOf(e.context.column.businessObject.outputDefinition.ref),1)}function c(e,t){r(e,function(e){r(e.condition,function(n){n.$parent===t&&e.condition.splice(e.condition.indexOf(n),1)}),r(e.conclusion,function(n){n.$parent===t&&e.conclusion.splice(e.conclusion.indexOf(n),1)})})}function u(e){r(e.context.row.businessObject.condition,function(e){var t=e.$parent.inputExpression?"inputEntry":"outputEntry";e.$parent[t].splice(e.$parent[t].indexOf(e),1)}),r(e.context.row.businessObject.conclusion,function(e){var t=e.$parent.inputExpression?"inputEntry":"outputEntry";e.$parent[t].splice(e.$parent[t].indexOf(e),1)}),e.context.row.businessObject.$parent.rule.splice(e.context.row.businessObject.$parent.rule.indexOf(e.context.row.businessObject),1)}function l(e){r(e.context.row.businessObject.condition,function(e){var t=e.$parent.inputExpression?"inputEntry":"outputEntry";e.$parent[t].splice(e.$parent[t].indexOf(e),1)}),r(e.context.row.businessObject.conclusion,function(e){var t=e.$parent.inputExpression?"inputEntry":"outputEntry";e.$parent[t].splice(e.$parent[t].indexOf(e),1)}),e.context.row.businessObject.condition.length=0,e.context.row.businessObject.conclusion.length=0}function p(e){r(e.context._oldContent,function(t){if("object"==typeof t){var n=t.$parent.inputExpression?"inputEntry":"outputEntry";t.$parent[n].push(t),e.context.row.businessObject["inputEntry"===n?"condition":"conclusion"].push(t)}})}s.call(this,e),this.executed(["column.create"],i),this.executed(["row.create"],o),this.executed(["column.delete"],a),this.executed(["row.delete"],u),this.executed(["row.clear"],l),this.reverted(["row.create"],u),this.reverted(["column.create"],a),this.reverted(["column.delete"],i),this.reverted(["row.delete"],o),this.reverted(["row.clear"],p)}var i=e(80),r=e(88),s=e(44);i(o,s),t.exports=o,o.$inject=["eventBus","moddle","elementRegistry"]},{44:44,80:80,88:88}],27:[function(e,t,n){"use strict";function o(e,t,n,o,i){r.call(this,e,t,n,o),this._elementRegistry=i;var s=this;e.on("tableName.editId",function(e){s.editId(e.newId)}),e.on("ioLabel.createColumn",function(e){s.createColumn(e.newColumn)}),e.on("mappingsRow.editInputMapping",function(e){s.editInputMapping(e.element,e.expression,e.language)}),e.on("typeRow.editDataType",function(e){s.editDataType(e.element,e.dataType,e.allowedValues)}),e.on("hitPolicy.edit",function(e){s.editHitPolicy(e.table,e.hitPolicy,e.aggregation,e.cell)})}var i=e(80),r=e(230),s=e(28),a=e(31),c=e(30),u=e(32),l=e(29);i(o,r),o.$inject=["eventBus","elementFactory","commandStack","sheet","elementRegistry"],t.exports=o,o.prototype.getHandlers=function(){var e=r.prototype.getHandlers.call(this);return e["cell.edit"]=s,e["inputMapping.edit"]=a,e["id.edit"]=c,e["dataType.edit"]=u,e["hitPolicy.edit"]=l,e},o.prototype.editCell=function(e,t,n){var o={row:e,column:t,content:n},i=this._elementRegistry.filter(function(n){return"cell"===n._type&&n.row.id===e&&n.column.id===t})[0];if(i.row.isClauseRow)i.column.businessObject.name!==n&&this._commandStack.execute("cell.edit",o);else if(i.row.isMappingsRow)i.content.output!==n&&this._commandStack.execute("cell.edit",o);else if(!i.row.isHead){var r=i.content;(!i.column.isAnnotationsColumn&&!r&&""!==o.content||r&&o.content!==r.text||i.column.isAnnotationsColumn&&i.row.businessObject.description!==o.content)&&this._commandStack.execute("cell.edit",o)}return o},o.prototype.editHitPolicy=function(e,t,n,o){var i={table:e,newPolicy:t,newAggregation:n,cell:o};return i.newAggregation&&"LIST"!==i.newAggregation||(i.newAggregation=void 0),(e.hitPolicy!==t||!e.aggregation&&i.newAggregation||e.aggregation!==i.newAggregation)&&this._commandStack.execute("hitPolicy.edit",i),i},o.prototype.editInputMapping=function(e,t,n){var o={cell:e,newMapping:t};return 3===arguments.length&&(o.language=n),(e.content.text!==t||e.content.expressionLanguage!==n)&&this._commandStack.execute("inputMapping.edit",o),o},o.prototype.editId=function(e){var t={newId:e};return this._commandStack.execute("id.edit",t),t},o.prototype.editDataType=function(e,t,n){var o={cell:e,newType:t};3===arguments.length&&(o.allowedValues=n);var i=!1;if(!e.content.allowedValue&&n||e.content.allowedValue&&!n||e.content.allowedValue&&n&&e.content.allowedValue.length!==n.length)i=!0;else if(e.content.allowedValue&&n)for(var r=0;r<n.length;r++)if(e.content.allowedValue[r].text!==n[r]){i=!0;break}return(e.content.typeDefinition!==t||i)&&this._commandStack.execute("dataType.edit",o),o}},{230:230,28:28,29:29,30:30,31:31,32:32,80:80}],28:[function(e,t,n){"use strict";function o(e,t,n,o,i){this._sheet=e,this._elementRegistry=t,this._graphicsFactory=n,this._dmnFactory=i,this._moddle=o}o.$inject=["sheet","elementRegistry","graphicsFactory","moddle","dmnFactory"],t.exports=o,o.prototype.execute=function(e){var t=this._elementRegistry.get("cell_"+e.column+"_"+e.row),n=this._elementRegistry.getGraphics("cell_"+e.column+"_"+e.row);return t.row.isHead?t.row.isMappingsRow?(e.oldContent=t.content.output,t.content.output=e.content):t.row.isClauseRow&&(e.oldContent=t.column.businessObject.name,t.column.businessObject.name=e.content):t.column.isAnnotationsColumn?(e.oldContent=t.row.businessObject.description,t.row.businessObject.description=e.content):(t.content?(e.oldContent=t.content.text,
t.content.text=e.content):t.content=this._dmnFactory[t.column.businessObject.inputExpression?"createInputEntry":"createOutputEntry"](e.content,t.column.businessObject,t.row.businessObject),""===e.content&&(t.column.businessObject.inputEntry?t.column.businessObject.inputEntry.splice(t.column.businessObject.inputEntry.indexOf(t.content),1):t.column.businessObject.outputEntry.splice(t.column.businessObject.outputEntry.indexOf(t.content),1),t.row.businessObject[t.column.businessObject.inputEntry?"condition":"conclusion"].splice(t.row.businessObject[t.column.businessObject.inputEntry?"condition":"conclusion"].indexOf(t.content),1),delete t.content)),this._graphicsFactory.update("cell",t,n),e},o.prototype.revert=function(e){var t=this._elementRegistry.get("cell_"+e.column+"_"+e.row),n=this._elementRegistry.getGraphics("cell_"+e.column+"_"+e.row);return t.row.isHead?t.row.isMappingsRow?t.content.output=e.oldContent:t.row.isClauseRow&&(t.column.businessObject.name=e.oldContent):t.column.isAnnotationsColumn?t.row.businessObject.description=e.oldContent:(t.content?t.content.text=e.oldContent:t.content=this._dmnFactory[t.column.businessObject.inputExpression?"createInputEntry":"createOutputEntry"](e.oldContent,t.column.businessObject,t.row.businessObject),t.content.text||(t.column.businessObject.inputEntry?t.column.businessObject.inputEntry.splice(t.column.businessObject.inputEntry.indexOf(t.content),1):t.column.businessObject.outputEntry.splice(t.column.businessObject.outputEntry.indexOf(t.content),1),t.row.businessObject[t.column.businessObject.inputEntry?"condition":"conclusion"].splice(t.row.businessObject[t.column.businessObject.inputEntry?"condition":"conclusion"].indexOf(t.content),1),delete t.content)),this._graphicsFactory.update("cell",t,n),e}},{}],29:[function(e,t,n){"use strict";function o(e,t){this._elementRegistry=e,this._graphicsFactory=t}o.$inject=["elementRegistry","graphicsFactory"],t.exports=o,o.prototype.execute=function(e){return e.oldPolicy=e.table.hitPolicy,e.oldAggregation=e.table.aggregation,e.table.hitPolicy=e.newPolicy,e.newAggregation?e.table.aggregation=e.newAggregation:e.table.aggregation=void 0,this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e},o.prototype.revert=function(e){return e.table.hitPolicy=e.oldPolicy,e.oldAggregation?e.table.aggregation=e.oldAggregation:e.table.aggregation=void 0,this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e}},{}],30:[function(e,t,n){"use strict";function o(e){this._tableName=e}o.$inject=["tableName"],t.exports=o,o.prototype.execute=function(e){return e.oldId=this._tableName.getId(),this._tableName.setId(e.newId),e},o.prototype.revert=function(e){return this._tableName.setId(e.oldId),e}},{}],31:[function(e,t,n){"use strict";function o(e,t){this._elementRegistry=e,this._graphicsFactory=t}o.$inject=["elementRegistry","graphicsFactory"],t.exports=o,o.prototype.execute=function(e){return e.oldMapping=e.cell.content.text,e.cell.content.text=e.newMapping,e.cell.content.expressionLanguage&&(e.oldLanguage=e.cell.content.expressionLanguage),"undefined"!=typeof e.language?e.cell.content.expressionLanguage=e.language:e.cell.content.expressionLanguage=void 0,this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e},o.prototype.revert=function(e){return e.cell.content.text=e.oldMapping,e.oldLanguage?e.cell.content.expressionLanguage=e.oldLanguage:e.cell.content.expressionLanguage=void 0,this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e}},{}],32:[function(e,t,n){"use strict";function o(e,t,n){this._elementRegistry=e,this._graphicsFactory=t,this._dmnFactory=n}var i=e(87);o.$inject=["elementRegistry","graphicsFactory","dmnFactory"],t.exports=o,o.prototype.execute=function(e){if(e.oldType=e.cell.content.typeDefinition,e.cell.content.typeDefinition=e.newType,e.cell.content.allowedValue&&(e.oldAllowedValue=e.cell.content.allowedValue),e.cell.content.allowedValue=void 0,"undefined"!=typeof e.allowedValues){var t=this;i(e.allowedValues,function(n){t._dmnFactory.createAllowedValue(n,e.cell.content)})}return this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e},o.prototype.revert=function(e){return e.cell.content.typeDefinition=e.oldType,e.oldAllowedValue?e.cell.content.allowedValue=e.oldAllowedValue:e.cell.content.allowedValue=void 0,this._graphicsFactory.update("cell",e.cell,this._elementRegistry.getGraphics(e.cell.id)),e}},{87:87}],33:[function(e,t,n){t.exports={__init__:["modeling","dmnUpdater"],__depends__:[e(238),e(212),e(13)],modeling:["type",e(27)],dmnUpdater:["type",e(26)]}},{13:13,212:212,238:238,26:26,27:27}],34:[function(e,t,n){"use strict";function o(e,t,n){s.call(this,e,t,n),this.node=i("<header><h3>"+this.tableName+'</h3><div class="tjs-table-id mappings"></div></header');var o=this;e.on("tableName.allowEdit",function(t){t.editAllowed&&(o.node.querySelector(".tjs-table-id").setAttribute("contenteditable",!0),o.node.querySelector(".tjs-table-id").addEventListener("blur",function(t){var n=t.target.textContent;n!==o.getId()&&e.fire("tableName.editId",{newId:n})},!0))}),this.semantic=null}var i=e(188),r=e(80),s=e(241);r(o,s),o.$inject=["eventBus","sheet","config.tableName"],t.exports=o,o.prototype.setSemantic=function(e){this.semantic=e,this.setName(e.name),this.setId(e.id)},o.prototype.setName=function(e){this.semantic.name=e,this.node.querySelector("h3").textContent=e||""},o.prototype.getName=function(){return this.semantic.name},o.prototype.setId=function(e){e&&(this.semantic.id=e),this.node.querySelector("div").textContent=this.semantic.id||""},o.prototype.getId=function(){return this.semantic.id}},{188:188,241:241,80:80}],35:[function(e,t,n){t.exports={__init__:["tableName"],__depends__:[],tableName:["type",e(34)]}},{34:34}],36:[function(e,t,n){"use strict";function o(e,t,n,o,u,l){this.row=null;var p=this;e.on("sheet.init",function(i){e.fire("typeRow.add",i),p.row=t.addRow({id:"typeRow",isHead:!0,isTypeRow:!0}),e.fire("typeRow.added",p.row),o.update("row",p.row,n.getGraphics(p.row.id))}),e.on("sheet.destroy",function(n){e.fire("typeRow.destroy",p.row),t.removeRow({id:"typeRow"}),e.fire("typeRow.destroyed",p.row)}),e.on("cell.added",function(e){if("typeRow"===e.element.row.id&&e.element.column.businessObject){e.element.column.businessObject.inputExpression?e.element.content=e.element.column.businessObject.inputExpression.itemDefinition.ref:e.element.column.businessObject.outputDefinition&&(e.element.content=e.element.column.businessObject.outputDefinition.ref);var t=i('<div>\n<div class="allowed-values"><label>Allowed values:</label>\n  <ul></ul>\n</div>\n</div>\n'),s=new c({label:"Type",classNames:["dmn-combobox","datatype"],options:["string","boolean","integer","long","double"],dropdownClassNames:["dmn-combobox-suggestions"]});s.addEventListener("valueChanged",function(e){"string"===e.newValue.toLowerCase()?r(t.parentNode).add("choices"):r(t.parentNode).remove("choices")}),t.querySelector(".allowed-values ul").addEventListener("input",function(e){var n=t.querySelectorAll(".allowed-values ul li");if(n[n.length-1].firstChild.value){var o=i('<li><input tabindex="1" placeholder="Possible Value"></li>');t.querySelector(".allowed-values ul").appendChild(o)}}),t.querySelector(".allowed-values ul").addEventListener("blur",function(e){e.target.value||e.target.parentNode.parentNode.lastChild===e.target.parentNode||e.target.parentNode.parentNode.removeChild(e.target.parentNode)},!0),t.insertBefore(s.getNode(),t.firstChild),e.element.complex={className:"dmn-clausevalues-setter",template:t,element:e.element,comboBox:s,type:"type",offset:{x:0,y:-15}},o.update("cell",e.element,n.getGraphics(e.element))}}),e.on("complexCell.open",function(e){if("type"===e.config.type){var t=n.getGraphics(e.config.element);e.container.style.left=window.parseInt(e.container.style.left,10)+t.clientWidth+"px",e.config.comboBox.setValue(e.config.element.content.typeDefinition);var o=e.config.template;s(o.querySelector(".allowed-values ul")),e.config.element.content.allowedValue&&a(e.config.element.content.allowedValue,function(e){var t=i('<li><input tabindex="1" placeholder="Possible Value"></li>');t.firstChild.value=e.text,o.querySelector(".allowed-values ul").appendChild(t)});var c=i('<li><input tabindex="1" placeholder="Possible Value"></li>');if(o.querySelector(".allowed-values ul").appendChild(c),o.querySelector(".dmn-combobox > input").focus(),!l.allowed("dataType.edit")){for(var u=o.querySelectorAll("input"),p=0;p<u.length;p++)u[p].setAttribute("disabled","true");e.config.comboBox.disable(),r(o.parentNode).add("read-only")}}}),e.on("complexCell.close",function(t){if("type"===t.config.type)if("string"===t.config.comboBox.getValue().toLowerCase()){for(var n=t.config.template.querySelectorAll(".allowed-values ul li"),o=[],i=0;i<n.length-1;i++)o.push(n[i].firstChild.value);e.fire("typeRow.editDataType",{element:t.config.element,dataType:t.config.comboBox.getValue(),allowedValues:o})}else e.fire("typeRow.editDataType",{element:t.config.element,dataType:t.config.comboBox.getValue()})})}var i=e(188),r=e(185),s=e(186),a=(e(176),e(87)),c=e(215);o.$inject=["eventBus","sheet","elementRegistry","graphicsFactory","complexCell","rules"],t.exports=o,o.prototype.getRow=function(){return this.row}},{176:176,185:185,186:186,188:188,215:215,87:87}],37:[function(e,t,n){"use strict";function o(e,t){e.on("row.render",function(e){e.data===t.getRow()&&i(e.gfx).add("values")}),e.on("cell.render",function(e){e.data.row===t.getRow()&&e.data.content&&(e.data.content.allowedValue&&e.data.content.allowedValue.length>0?e.gfx.childNodes[0].textContent="("+e.data.content.allowedValue.map(function(e){return e.text}).join(", ")+")":e.gfx.childNodes[0].textContent=e.data.content.typeDefinition||"")})}var i=e(185);o.$inject=["eventBus","typeRow"],t.exports=o},{185:185}],38:[function(e,t,n){t.exports={__init__:["typeRow","typeRowRenderer"],__depends__:[e(217)],typeRow:["type",e(36)],typeRowRenderer:["type",e(37)]}},{217:217,36:36,37:37}],39:[function(e,t,n){"use strict";function o(e,t){return r({id:e.id,type:e.$type,businessObject:e},t)}function i(e,t,n,o,i,r,s,a){this._eventBus=e,this._sheet=t,this._elementRegistry=n,this._elementFactory=o,this._tableName=r,this._dmnFactory=a,this._ioLabel=s,this._moddle=i,this.usedEntries=[]}var r=e(176),s=e(42).elementToString;i.$inject=["eventBus","sheet","elementRegistry","elementFactory","moddle","tableName","ioLabel","dmnFactory"],t.exports=i,i.prototype._makeCopy=function(e){var t=this._moddle.create(e.$type);for(var n in e)e.hasOwnProperty(n)&&"$type"!==n&&(t[n]=e[n]);return t.$parent=e.$parent,t},i.prototype.add=function(e,t,n){var i;if(e.$instanceOf("dmn:DecisionTable"))i=this._elementFactory.createRow(o(e,{isHead:!0,isClauseRow:!0,previous:this._ioLabel.getRow()})),this._sheet.addRow(i,t),this._tableName.setSemantic(e.$parent);else if(e.$instanceOf("dmn:Clause")){e.inputExpression&&!e.inputEntry?e.inputEntry=[]:e.outputDefinition&&!e.outputEntry&&(e.outputEntry=[]),n.ItemDefinition||(n.ItemDefinition=[]);var r;e.inputExpression?(e.inputExpression.itemDefinition||(e.inputExpression.itemDefinition=this._dmnFactory.create("dmn:DMNElementReference",{}),e.inputExpression.itemDefinition.ref=this._dmnFactory.createItemDefinition(),n.ItemDefinition.push(e.inputExpression.itemDefinition.ref),e.inputExpression.itemDefinition.href="#"+e.inputExpression.itemDefinition.ref.id),r=e.inputExpression.itemDefinition.href):(e.outputDefinition||(e.outputDefinition=this._dmnFactory.create("dmn:DMNElementReference",{}),e.outputDefinition.ref=this._dmnFactory.createItemDefinition(),n.ItemDefinition.push(e.outputDefinition.ref),e.outputDefinition.href="#"+e.outputDefinition.ref.id),r=e.outputDefinition.href);var a=e.inputExpression?e.inputExpression.itemDefinition:e.outputDefinition;a.ref=n.ItemDefinition.filter(function(e){return e.id===r.substr(r.indexOf("#")+1)})[0],i=this._elementFactory.createColumn(o(e,{})),this._sheet.addColumn(i,t)}else if(e.$instanceOf("dmn:DecisionRule"))e.condition||(e.condition=[]),e.conclusion||(e.conclusion=[]),i=this._elementFactory.createRow(o(e,{})),this._sheet.addRow(i,t);else{if(!e.$instanceOf("dmn:LiteralExpression"))throw new Error("can not render element "+s(e));var c=this._elementRegistry.filter(function(t){return t.businessObject===e.$parent})[0].id,u=this._elementRegistry.filter(function(e){return e.businessObject===t})[0].id,l=e;if(-1!==this.usedEntries.indexOf(e)){l=this._makeCopy(e),l.id=u+"_"+c,l.$parent[l.$parent.inputEntry?"inputEntry":"outputEntry"].push(l);var p=l.$parent.inputEntry?"condition":"conclusion";t[p].splice(t[p].indexOf(e),1,l)}this._sheet.setCellContent({row:u,column:c,content:l}),this.usedEntries.push(l)}return this._eventBus.fire("dmnElement.added",{element:i}),i}},{176:176,42:42}],40:[function(e,t,n){"use strict";function o(e){function t(t,n,o){var i=t.gfx;if(i)throw new Error("already rendered "+s(t));return e.element(t,n,o)}function n(t){return e.table(t)}function o(e){var t,o=e.Decision;if(o&&o.length&&(t=o[0]),t){var i=t.DecisionTable;if(!i)throw new Error("no table for "+s(t));var r=n(i);a(i.clause,r,e),c(i.rule,r,e)}}function a(e,n,o){i(r(e,function(e){return!e.inputExpression}),function(e){t(e,n,o)})}function c(e,n,o){i(e,function(e){t(e,n,o),u(e.condition,e),l(e.conclusion,e)})}function u(e,n,o){i(e,function(e){t(e,n,o)})}function l(e,n,o){i(e,function(e){t(e,n,o)})}return{handleDefinitions:o}}var i=e(87),r=e(91),s=e(42).elementToString;t.exports=o},{42:42,87:87,91:91}],41:[function(e,t,n){"use strict";function o(e,t,n){function o(e){var t={table:function(e){return s.add(e)},element:function(e,t,n){return s.add(e,t,n)},error:function(e,t){c.push({message:e,context:t})}},n=new i(t);n.handleDefinitions(e)}var r,s=e.get("dmnImporter"),a=e.get("eventBus"),c=[];a.fire("import.start");try{o(t)}catch(u){r=u}a.fire(r?"import.error":"import.success",{error:r,warnings:c}),n(r,c)}var i=e(40);t.exports.importDmnTable=o},{40:40}],42:[function(e,t,n){"use strict";t.exports.elementToString=function(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}},{}],43:[function(e,t,n){t.exports={__depends__:[e(13)],dmnImporter:["type",e(39)]}},{13:13,39:39}],44:[function(e,t,n){"use strict";function o(e){this._eventBus=e}function i(e){return function(t){return e(t.context,t.command,t)}}var r=e(87),s=e(170),a=e(169),c=e(172),u=1e3;o.$inject=["eventBus"],t.exports=o,o.prototype.on=function(e,t,n,o,l){if((s(t)||c(t))&&(l=o,o=n,n=t,t=null),s(n)&&(l=o,o=n,n=u),!s(o))throw new Error("handlerFn must be a function");a(e)||(e=[e]);var p=this._eventBus;r(e,function(e){var r=["commandStack",e,t].filter(function(e){return e}).join(".");p.on(r,n,l?i(o):o)})};var l=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];r(l,function(e){o.prototype[e]=function(t,n,o,i){(s(t)||c(t))&&(i=o,o=n,n=t,t=null),this.on(t,e,n,o,i)}})},{169:169,170:170,172:172,87:87}],45:[function(e,t,n){"use strict";function o(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1}var i=e(83),r=e(169),s=e(176),a=e(47).Event;o.$inject=["eventBus","injector"],t.exports=o,o.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},o.prototype.canExecute=function(e,t){var n={command:e,context:t},o=this._getHandler(e);if(!o)return!1;var i=this._fire(e,"canExecute",n);return void 0===i&&o.canExecute&&(i=o.canExecute(t)),i},o.prototype.clear=function(){this._stack.length=0,this._stackIdx=-1,this._fire("changed")},o.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),e=this._getUndoAction(),e&&e.id===t.id);)t=e;this._popAction()}},o.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),e=this._getRedoAction(),e&&e.id===t.id);)t=e;this._popAction()}},o.prototype.register=function(e,t){this._setHandler(e,t)},o.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},o.prototype.canUndo=function(){return!!this._getUndoAction()},o.prototype.canRedo=function(){return!!this._getRedoAction()},o.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},o.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},o.prototype._internalUndo=function(e){var t=e.command,n=e.context,o=this._getHandler(t);this._fire(t,"revert",e),this._markDirty(o.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)},o.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var o,i,r,c=t?[e+"."+t,t]:[e];for(n=s(new a,n),o=0;(i=c[o])&&(r=this._eventBus.fire("commandStack."+i,n),!n.cancelBubble);o++);return r},o.prototype._createId=function(){return this._uid++},o.prototype._internalExecute=function(e,t){var n=e.command,o=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(o),this._fire(n,"preExecuted",e)),this._fire(n,"execute",e),this._markDirty(i.execute(o)),this._executedAction(e,t),this._fire(n,"executed",e),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(o),this._fire(n,"postExecuted",e)),this._popAction(e)},o.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,o=n[0];e.id||(e.id=o&&o.id||this._createId()),n.push(e)},o.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:i(n)}),n.length=0,this._fire("changed"))},o.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=r(e)?e:[e],t.dirty=t.dirty.concat(e))},o.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},o.prototype._revertedAction=function(e){this._stackIdx--},o.prototype._getHandler=function(e){return this._handlerMap[e]},o.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t}},{169:169,176:176,47:47,83:83}],46:[function(e,t,n){t.exports={commandStack:["type",e(45)]}},{45:45}],47:[function(e,t,n){"use strict";function o(){this._listeners={};var e=this;this.on("diagram.destroy",1,function(){e._listeners=null})}function i(){}var r=e(170),s=e(169),a=e(172),c=e(176),u=1e3;t.exports=o,o.prototype.on=function(e,t,n){if(e=s(e)?e:[e],r(t)&&(n=t,t=u),!a(t))throw new Error("priority must be a number");var o=this,i={priority:t,callback:n};e.forEach(function(e){o._addListener(e,i)})},o.prototype.once=function(e,t){function n(){t.apply(o,arguments),o.off(e,n)}var o=this;this.on(e,n)},o.prototype.off=function(e,t){var n,o,i=this._getListeners(e);if(t)for(o=i.length-1;n=i[o];o--)n.callback===t&&i.splice(o,1);else i.length=0},o.prototype.fire=function(e,t){var n,o,r,s,a,c,u;if(u=Array.prototype.slice.call(arguments),"object"==typeof e&&(n=e,e=n.type),!e)throw new Error("no event type specified");if(r=this._listeners[e]){t instanceof i?n=t:(n=new i,n.init(t)),u[0]=n,o=n.type;try{for(e!==o&&(n.type=e),s=0;(a=r[s])&&!n.cancelBubble;s++)try{c=n.returnValue=a.callback.apply(null,u),void 0!==c&&n.stopPropagation(),c===!1&&n.preventDefault()}catch(l){if(!this.handleError(l))throw console.error("unhandled error in event listener"),console.error(l.stack),l}}finally{e!==o&&(n.type=o)}return void 0===c&&n.defaultPrevented&&(c=!1),c}},o.prototype.handleError=function(e){return this.fire("error",{error:e})===!1},o.prototype._addListener=function(e,t){var n,o,i=this._getListeners(e);for(o=0;n=i[o];o++)if(n.priority<t.priority)return void i.splice(o,0,t);i.push(t)},o.prototype._getListeners=function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t},t.exports.Event=i,i.prototype.stopPropagation=function(){this.cancelBubble=!0},i.prototype.preventDefault=function(){this.defaultPrevented=!0},i.prototype.init=function(e){c(this,e||{})}},{169:169,170:170,172:172,176:176}],48:[function(e,t,n){"use strict";function o(e){r.call(this,e),this.init()}var i=e(80),r=e(44);o.$inject=["eventBus"],i(o,r),t.exports=o,o.prototype.addRule=function(e,t,n){var o=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){o.canExecute(e,t,function(e,t,o){return n(e)},!0)})}},{44:44,80:80}],49:[function(e,t,n){"use strict";function o(e){this._commandStack=e}o.$inject=["commandStack"],t.exports=o,o.prototype.allowed=function(e,t){var n=this._commandStack.canExecute(e,t);return void 0===n?!0:n}},{}],50:[function(e,t,n){t.exports={__depends__:[e(46)],__init__:["rules"],rules:["type",e(49)]}},{46:46,49:49}],51:[function(e,t,n){"use strict";function o(e){return e&&e.preventDefault()}function i(e,t){e&&(e.stopPropagation&&e.stopPropagation(),t&&e.stopImmediatePropagation&&e.stopImmediatePropagation())}function r(e){return e.originalEvent||e.srcEvent}function s(e,t){c(e,t),a(e)}function a(e){o(e),o(r(e))}function c(e,t){i(e,t),i(r(e),t)}function u(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}t.exports.getOriginal=r,t.exports.stopEvent=s,t.exports.preventDefault=a,t.exports.stopPropagation=c,t.exports.toPoint=u},{}],52:[function(e,t,n){"use strict";function o(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}t.exports=o,o.prototype.next=function(){return this._prefix+ ++this._counter}},{}],53:[function(e,t,n){"use strict";function o(e){return!(i(e)||e).button}var i=e(51).getOriginal,r=e(54).isMac;t.exports.isPrimaryButton=o,t.exports.isMac=r,t.exports.hasPrimaryModifier=function(e){var t=i(e)||e;return o(e)?r()?t.altKey:t.ctrlKey:!1},t.exports.hasSecondaryModifier=function(e){var t=i(e)||e;return o(e)&&t.shiftKey}},{51:51,54:54}],54:[function(e,t,n){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],55:[function(e,t,n){var o=function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=function(){var e=Array.prototype.slice.call(arguments);1===e.length&&o(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t},r=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,s=/\/\*([^\*]*)\*\//m,a=function(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(r);return t[1]&&t[1].split(",").map(function(e){return t=e.match(s),t?t[1].trim():e.trim()})||[]};n.annotate=i,n.parse=a,n.isArray=o},{}],56:[function(e,t,n){t.exports={annotate:e(55).annotate,Module:e(58),Injector:e(57)}},{55:55,57:57,58:58}],57:[function(e,t,n){var o=e(58),i=e(55).parse,r=e(55).annotate,s=e(55).isArray,a=function(e,t){t=t||{get:function(e){throw n.push(e),p('No provider for "'+e+'"!')}};var n=[],c=this._providers=Object.create(t._providers||null),u=this._instances=Object.create(null),l=u.injector=this,p=function(e){var t=n.join(" -> ");return n.length=0,new Error(t?e+" (Resolving: "+t+")":e)},d=function(e){if(!c[e]&&-1!==e.indexOf(".")){for(var o=e.split("."),i=d(o.shift());o.length;)i=i[o.shift()];return i}if(Object.hasOwnProperty.call(u,e))return u[e];if(Object.hasOwnProperty.call(c,e)){if(-1!==n.indexOf(e))throw n.push(e),p("Cannot resolve circular dependency!");return n.push(e),u[e]=c[e][0](c[e][1]),n.pop(),u[e]}return t.get(e)},f=function(e){var t=Object.create(e.prototype),n=h(e,t);return"object"==typeof n?n:t},h=function(e,t){if("function"!=typeof e){if(!s(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=r(e.slice())}var n=e.$inject&&e.$inject||i(e),o=n.map(function(e){return d(e)});return e.apply(t,o)},m=function(e){return r(function(t){return e.get(t)})},y=function(e,t){if(t&&t.length){var n,o,i,r,s=Object.create(null),u=Object.create(null),p=[],d=[],f=[];for(var h in c)n=c[h],-1!==t.indexOf(h)&&("private"===n[2]?(o=p.indexOf(n[3]),-1===o?(i=n[3].createChild([],t),r=m(i),p.push(n[3]),d.push(i),f.push(r),s[h]=[r,h,"private",i]):s[h]=[f[o],h,"private",d[o]]):s[h]=[n[2],n[1]],u[h]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(s[h]=[n[2],n[1]],u[e]=!0)});t.forEach(function(e){if(!u[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(s)}return new a(e,l)},g={factory:h,type:f,value:function(e){return e}};e.forEach(function(e){function t(e,t){return"value"!==e&&s(t)&&(t=r(t.slice())),t}if(e instanceof o)e.forEach(function(e){var n=e[0],o=e[1],i=e[2];c[n]=[g[o],t(o,i),o]});else if("object"==typeof e)if(e.__exports__){var n=Object.keys(e).reduce(function(t,n){return"__"!==n.substring(0,2)&&(t[n]=e[n]),t},Object.create(null)),i=new a((e.__modules__||[]).concat([n]),l),u=r(function(e){return i.get(e)});e.__exports__.forEach(function(e){c[e]=[u,e,"private",i]})}else Object.keys(e).forEach(function(n){if("private"===e[n][2])return void(c[n]=e[n]);var o=e[n][0],i=e[n][1];c[n]=[g[o],t(o,i),o]})}),this.get=d,this.invoke=h,this.instantiate=f,this.createChild=y};t.exports=a},{55:55,58:58}],58:[function(e,t,n){var o=function(){var e=[];this.factory=function(t,n){return e.push([t,"factory",n]),this},this.value=function(t,n){return e.push([t,"value",n]),this},this.type=function(t,n){return e.push([t,"type",n]),this},this.forEach=function(t){e.forEach(t)}};t.exports=o},{}],59:[function(e,t,n){t.exports=e(62)},{62:62}],60:[function(e,t,n){"use strict";function o(e,t){a.call(this,e,t)}var i=e(174),r=e(170),s=e(176),a=e(68),c=e(64),u=e(65);o.prototype=Object.create(a.prototype),t.exports=o,o.prototype.fromXML=function(e,t,n,o){i(t)||(o=n,n=t,t="Definitions"),r(n)&&(o=n,n={});var a=new c(s({model:this,lax:!0},n)),u=a.handler(t);a.fromXML(e,u,o)},o.prototype.toXML=function(e,t,n){r(t)&&(n=t,t={});var o=new u(t);try{var i=o.toXML(e);n(null,i)}catch(s){n(s)}}},{170:170,174:174,176:176,64:64,65:65,68:68}],61:[function(e,t,n){"use strict";var o=/^(.*:)?id$/;t.exports.extend=function(e,t){var n=e.properties.set;return e.ids||(e.properties.set=function(t,i,r){if(o.test(i)){var s=e.ids.assigned(r);if(s&&s!==t)throw new Error("id <"+r+"> already used");e.ids.claim(r,t)}n.call(this,t,i,r)}),e.ids=t,e}},{}],62:[function(e,t,n){"use strict";var o=e(176),i=e(60),r={dmn:e(77)};t.exports=function(e,t){return new i(o({},r,e),t)}},{176:176,60:60,77:77}],63:[function(e,t,n){"use strict";function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){return e.charAt(0).toLowerCase()+e.slice(1)}function r(e){return e.xml&&"lowerCase"===e.xml.tagAlias}function s(e){return e.xml&&e.xml.serialize}t.exports.aliasToName=function(e,t){return r(t)?o(e):e},t.exports.nameToAlias=function(e,t){return r(t)?i(e):e},t.exports.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var a=t.exports.XSI_TYPE="xsi:type";t.exports.serializeAsType=function(e){return s(e)===a},t.exports.serializeAsProperty=function(e){return"property"===s(e)}},{}],64:[function(e,t,n){"use strict";function o(e){var t=e.attributes;return y(t,function(e,t,n){var o,i;return t.local?(i=N(t.name,t.prefix),o=i.name):o=t.prefix,e[o]=t.value,e},{})}function i(e,t,n){var o,i=N(t.value),r=e.ns[i.prefix||""],s=i.localName,a=r&&n.getPackage(r);a&&(o=a.xml&&a.xml.typePrefix,o&&0===s.indexOf(o)&&(s=s.slice(o.length)),t.value=a.prefix+":"+s)}function r(e,t,n){var o,s;if(o=e.uri||n){var a=t.getPackage(o);s=a?a.prefix:e.prefix,e.prefix=s,e.uri=o}g(e.attributes,function(n){n.uri===j&&"type"===n.local&&i(e,n,t),r(n,t,null)})}function s(e){_(this,e);var t=this.elementsById={},n=this.references=[],o=this.warnings=[];this.addReference=function(e){n.push(e)},this.addElement=function(e,n){if(!e||!n)throw new Error("[xml-reader] id or ctx must not be null");t[e]=n},this.addWarning=function(e){o.push(e)}}function a(){}function c(){}function u(){}function l(e,t){this.property=e,this.context=t}function p(e,t){this.element=t,this.propertyDesc=e}function d(){}function f(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function h(e,t,n){this.model=e,this.context=n}function m(e){e instanceof E&&(e={model:e}),_(this,{lax:!1},e)}var y=e(90),g=e(87),v=e(86),_=e(176),x=e(92),b=e(67),w=e(66).parser,E=e(68),N=e(73).parseName,C=e(76),T=C.coerceType,A=C.isSimple,O=e(63),R=O.XSI_TYPE,j=O.DEFAULT_NS_MAP.xsi,D=O.serializeAsType,S=O.aliasToName;a.prototype.handleEnd=function(){},a.prototype.handleText=function(){},a.prototype.handleNode=function(){},c.prototype=new a,c.prototype.handleNode=function(){return this},u.prototype=new a,u.prototype.handleText=function(e){this.body=(this.body||"")+e},l.prototype=new u,l.prototype.handleNode=function(e){if(this.element)throw new Error("expected no sub nodes");return this.element=this.createReference(e),this},l.prototype.handleEnd=function(){this.element.id=this.body},l.prototype.createReference=function(){return{property:this.property.ns.name,id:""}},p.prototype=new u,p.prototype.handleEnd=function(){var e=this.body,t=this.element,n=this.propertyDesc;e=T(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},d.prototype=Object.create(u.prototype),d.prototype.handleNode=function(e){var t,n=this,o=this.element;return o?n=this.handleChild(e):(o=this.element=this.createElement(e),t=o.id,t&&this.context.addElement(t,o)),n},f.prototype=new d,f.prototype.addReference=function(e){this.context.addReference(e)},f.prototype.handleEnd=function(){var e=this.body,t=this.element,n=t.$descriptor,o=n.bodyProperty;o&&void 0!==e&&(e=T(o.type,e),t.set(o.name,e))},f.prototype.createElement=function(e){var t=o(e),n=this.type,i=n.$descriptor,r=this.context,s=new n({});return g(t,function(e,t){var n=i.propertiesByName[t];n&&n.isReference?r.addReference({element:s,property:n.ns.name,id:e}):(n&&(e=T(n.type,e)),s.set(t,e))}),s},f.prototype.getPropertyForNode=function(e){var t,n,o,i=N(e.local,e.prefix),r=this.type,s=this.model,a=r.$descriptor,c=i.name,u=a.propertiesByName[c];if(u)return D(u)&&(o=e.attributes[R])?(t=o.value,n=s.getType(t),_({},u,{effectiveType:n.$descriptor.name})):u;var l=s.getPackage(i.prefix);if(l){if(t=i.prefix+":"+S(i.localName,a.$pkg),n=s.getType(t),u=v(a.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return _({},u,{effectiveType:n.$descriptor.name})}else if(u=v(a.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return u;throw new Error("unrecognized element <"+i.name+">")},f.prototype.toString=function(){return"ElementDescriptor["+this.type.$descriptor.name+"]"},f.prototype.valueHandler=function(e,t){return new p(e,t)},f.prototype.referenceHandler=function(e){return new l(e,this.context)},f.prototype.handler=function(e){return"Element"===e?new h(this.model,e,this.context):new f(this.model,e,this.context)},f.prototype.handleChild=function(e){var t,n,o,i;if(t=this.getPropertyForNode(e),o=this.element,n=t.effectiveType||t.type,A(n))return this.valueHandler(t,o);i=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e);var r=i.element;return void 0!==r&&(t.isMany?o.get(t.name).push(r):o.set(t.name,r),t.isReference?(_(r,{element:o}),this.context.addReference(r)):r.$parent=o),i},h.prototype=Object.create(d.prototype),h.prototype.createElement=function(e){var t=e.name,n=e.prefix,o=e.ns[n],i=e.attributes;return this.model.createAny(t,o,i)},h.prototype.handleChild=function(e){var t,n=new h(this.model,"Element",this.context).handleNode(e),o=this.element,i=n.element;return void 0!==i&&(t=o.$children=o.$children||[],t.push(i),i.$parent=o),n},h.prototype.handleText=function(e){this.body=this.body||""+e},h.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},m.prototype.fromXML=function(e,t,n){function o(){var e,t,n=d.elementsById,o=d.references;for(e=0;t=o[e];e++){
var i=t.element,r=n[t.id],s=i.$descriptor.propertiesByName[t.property];if(r||d.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),s.isMany){var a=i.get(s.name),c=a.indexOf(t);r?a[c]=r:a.splice(c,1)}else i.set(s.name,r)}}function i(e){h.pop().handleEnd()}function a(e){var t=h.peek();r(e,l);try{h.push(t.handleNode(e))}catch(n){var o=this.line,i=this.column,s="unparsable content <"+e.name+"> detected\n	line: "+o+"\n	column: "+i+"\n	nested error: "+n.message;if(!p)throw console.error("could not parse document"),console.error(n),new Error(s);d.addWarning({message:s,error:n}),console.warn("could not parse node"),console.warn(n),h.push(new c)}}function u(e){h.peek().handleText(e)}var l=this.model,p=this.lax,d=new s({parseRoot:t}),f=new w(!0,{xmlns:!0,trim:!0}),h=new b;t.context=d,h.push(t),f.onopentag=a,f.oncdata=f.ontext=u,f.onclosetag=i,f.onend=o,x(function(){var o;try{f.write(e).close()}catch(i){o=i}n(o,o?void 0:t.element,d)})},m.prototype.handler=function(e){return new f(this.model,e)},t.exports=m,t.exports.ElementHandler=f},{176:176,63:63,66:66,67:67,68:68,73:73,76:76,86:86,87:87,90:90,92:92}],65:[function(e,t,n){"use strict";function o(e){return x(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function i(e,t){return t.isGeneric?t.name:w({localName:T(t.ns.localName,t.$pkg)},e)}function r(e,t){return w({localName:t.ns.localName},e)}function s(e){var t=e.$descriptor;return b(t.properties,function(t){var n=t.name;if(!e.hasOwnProperty(n))return!1;var o=e[n];return o===t["default"]?!1:t.isMany?o.length:!0})}function a(e){return e=x(e)?e:""+e,e.replace(j,function(e){return"&#"+I[e]+";"})}function c(e){return b(e,function(e){return e.isAttr})}function u(e){return b(e,function(e){return!e.isAttr})}function l(e,t){this.ns=t}function p(){}function d(e){this.ns=e}function f(e,t){this.body=[],this.attrs=[],this.parent=e,this.ns=t}function h(e,t){f.call(this,e,t)}function m(){this.value="",this.write=function(e){this.value+=e}}function y(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function g(e){function t(t,n){var o=n||new m,i=new y(o,e.format);return e.preamble&&i.append(R),(new f).build(t).serializeTo(i),n?void 0:o.value}return e=w({format:!1,preamble:!0},e||{}),{toXML:t}}var v=e(89),_=e(87),x=e(174),b=e(85),w=e(176),E=e(76),N=e(73).parseName,C=e(63),T=C.nameToAlias,A=C.serializeAsType,O=C.serializeAsProperty,R='<?xml version="1.0" encoding="UTF-8"?>\n',j=/(<|>|'|"|&|\n\r|\n)/g,D=C.DEFAULT_NS_MAP,S=C.XSI_TYPE,I={"\n":"10","\n\r":"10",'"':"34","'":"39","<":"60",">":"62","&":"38"};l.prototype.build=function(e){return this.element=e,this},l.prototype.serializeTo=function(e){e.appendIndent().append("<"+o(this.ns)+">"+this.element.id+"</"+o(this.ns)+">").appendNewLine()},p.prototype.serializeValue=p.prototype.serializeTo=function(e){var t=this.escape;t&&e.append("<![CDATA["),e.append(this.value),t&&e.append("]]>")},p.prototype.build=function(e,t){return this.value=t,"String"===e.type&&j.test(t)&&(this.escape=!0),this},d.prototype=new p,d.prototype.serializeTo=function(e){e.appendIndent().append("<"+o(this.ns)+">"),this.serializeValue(e),e.append("</"+o(this.ns)+">").appendNewLine()},f.prototype.build=function(e){this.element=e;var t=this.parseNsAttributes(e);if(this.ns||(this.ns=this.nsTagName(e.$descriptor)),e.$descriptor.isGeneric)this.parseGeneric(e);else{var n=s(e);this.parseAttributes(c(n)),this.parseContainments(u(n)),this.parseGenericAttributes(e,t)}return this},f.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return i(t,e)},f.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return r(t,e)},f.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},f.prototype.nsAttributeName=function(e){var t;x(e)?t=N(e):e.ns&&(t=e.ns);var n=this.logNamespaceUsed(t);return this.isLocalNs(n)?{localName:t.localName}:w({localName:t.localName},n)},f.prototype.parseGeneric=function(e){var t=this,n=this.body,o=this.attrs;_(e,function(e,i){"$body"===i?n.push((new p).build({type:"String"},e)):"$children"===i?_(e,function(e){n.push(new f(t).build(e))}):0!==i.indexOf("$")&&o.push({name:i,value:a(e)})})},f.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,o=[];return _(n,function(e,n){var i=N(n);"xmlns"===i.prefix?t.logNamespace({prefix:i.localName,uri:e}):i.prefix||"xmlns"!==i.localName?o.push({name:n,value:e}):t.logNamespace({uri:e})}),o},f.prototype.parseGenericAttributes=function(e,t){var n=this;_(t,function(t){if(t.name!==S)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(o){console.warn("[writer] missing namespace information for ",t.name,"=",t.value,"on",e,o)}})},f.prototype.parseContainments=function(e){var t=this,n=this.body,o=this.element;_(e,function(e){var i=o.get(e.name),r=e.isReference,s=e.isMany,a=t.nsPropertyTagName(e);if(s||(i=[i]),e.isBody)n.push((new p).build(e,i[0]));else if(E.isSimple(e.type))_(i,function(t){n.push(new d(a).build(e,t))});else if(r)_(i,function(e){n.push(new l(t,a).build(e))});else{var c=A(e),u=O(e);_(i,function(e){var o;o=c?new h(t,a):u?new f(t,a):new f(t),n.push(o.build(e))})}})},f.prototype.getNamespaces=function(){return this.parent?this.namespaces=this.parent.getNamespaces():this.namespaces||(this.namespaces={prefixMap:{},uriMap:{},used:{}}),this.namespaces},f.prototype.logNamespace=function(e){var t=this.getNamespaces(),n=t.uriMap[e.uri];return n||(t.uriMap[e.uri]=e),t.prefixMap[e.prefix]=e.uri,e},f.prototype.logNamespaceUsed=function(e){var t=this.element,n=t.$model,o=this.getNamespaces(),i=e.prefix,r=e.uri||D[i]||o.prefixMap[i]||(n?(n.getPackage(i)||{}).uri:null);if(!r)throw new Error("no namespace uri given for prefix <"+e.prefix+">");return e=o.uriMap[r],e||(e=this.logNamespace({prefix:i,uri:r})),o.used[e.uri]||(o.used[e.uri]=e),e},f.prototype.parseAttributes=function(e){var t=this,n=this.element;_(e,function(e){t.logNamespaceUsed(e.ns);var o=n.get(e.name);e.isReference&&(o=o.id),t.addAttribute(t.nsAttributeName(e),o)})},f.prototype.addAttribute=function(e,t){var n=this.attrs;x(t)&&(t=a(t)),n.push({name:e,value:t})},f.prototype.serializeAttributes=function(e){function t(){return v(r.used,function(e){var t="xmlns"+(e.prefix?":"+e.prefix:"");return{name:t,value:e.uri}})}var n=this.attrs,i=!this.parent,r=this.namespaces;i&&(n=t().concat(n)),_(n,function(t){e.append(" ").append(o(t.name)).append('="').append(t.value).append('"')})},f.prototype.serializeTo=function(e){var t=this.body.length,n=!(1===this.body.length&&this.body[0]instanceof p);e.appendIndent().append("<"+o(this.ns)),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),_(this.body,function(t){t.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+o(this.ns)+">")),e.appendNewLine()},h.prototype=new f,h.prototype.build=function(e){var t=e.$descriptor;this.element=e,this.typeNs=this.nsTagName(t);var n=this.typeNs,o=e.$model.getPackage(n.uri),i=o.xml&&o.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(S),(n.prefix?n.prefix+":":"")+i+t.ns.localName),f.prototype.build.call(this,e)},h.prototype.isLocalNs=function(e){return e.uri===this.typeNs.uri},t.exports=g},{174:174,176:176,63:63,73:73,76:76,85:85,87:87,89:89}],66:[function(e,t,n){(function(t){!function(n){function o(e,t){if(!(this instanceof o))return new o(e,t);var i=this;r(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=t||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=q.BEGIN,i.ENTITIES=Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(U)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),f(i,"onready")}function i(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),o=0,i=0,r=A.length;r>i;i++){var s=e[A[i]].length;if(s>t)switch(A[i]){case"textNode":m(e);break;case"cdata":h(e,"oncdata",e.cdata),e.cdata="";break;case"script":h(e,"onscript",e.script),e.script="";break;default:g(e,"Max buffer length exceeded: "+A[i])}o=Math.max(o,s)}e.bufferCheckPosition=n.MAX_BUFFER_LENGTH-o+e.position}function r(e){for(var t=0,n=A.length;n>t;t++)e[A[t]]=""}function s(e){m(e),""!==e.cdata&&(h(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(h(e,"onscript",e.script),e.script="")}function a(e,t){return new c(e,t)}function c(e,t){if(!(this instanceof c))return new c(e,t);O.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,j.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){return t?void n.on(e,t):(n.removeAllListeners(e),n._parser["on"+e]=t)},enumerable:!0,configurable:!1})})}function u(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function p(e,t){return l(e)?!!t.match(e):e[t]}function d(e,t){return!p(e,t)}function f(e,t,n){e[t]&&e[t](n)}function h(e,t,n){e.textNode&&m(e),f(e,t,n)}function m(e){e.textNode=y(e.opt,e.textNode),e.textNode&&f(e,"ontext",e.textNode),e.textNode=""}function y(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function g(e,t){return m(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,f(e,"onerror",t),e}function v(e){return e.closedRoot||_(e,"Unclosed root tag"),e.state!==q.BEGIN&&e.state!==q.TEXT&&g(e,"Unexpected end"),m(e),e.c="",e.closed=!0,f(e,"onend"),o.call(e,e.strict,e.opt),e}function _(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&g(e,t)}function x(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0}function b(e,t){var n=e.indexOf(":"),o=0>n?["",e]:e.split(":"),i=o[0],r=o[1];return t&&"xmlns"===e&&(i="xmlns",r=""),{prefix:i,local:r}}function w(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return e.attribName=e.attribValue="";if(e.opt.xmlns){var t=b(e.attribName,!0),n=t.prefix,o=t.local;if("xmlns"===n)if("xml"===o&&e.attribValue!==$)_(e,"xml: prefix must be bound to "+$+"\nActual: "+e.attribValue);else if("xmlns"===o&&e.attribValue!==F)_(e,"xmlns: prefix must be bound to "+F+"\nActual: "+e.attribValue);else{var i=e.tag,r=e.tags[e.tags.length-1]||e;i.ns===r.ns&&(i.ns=Object.create(r.ns)),i.ns[o]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,h(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function E(e,t){if(e.opt.xmlns){var n=e.tag,o=b(e.tagName);n.prefix=o.prefix,n.local=o.local,n.uri=n.ns[o.prefix]||"",n.prefix&&!n.uri&&(_(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=o.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){h(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var r=0,s=e.attribList.length;s>r;r++){var a=e.attribList[r],c=a[0],u=a[1],l=b(c,!0),p=l.prefix,d=l.local,f=""==p?"":n.ns[p]||"",m={name:c,value:u,prefix:p,local:d,uri:f};p&&"xmlns"!=p&&!f&&(_(e,"Unbound namespace prefix: "+JSON.stringify(p)),m.uri=p),e.tag.attributes[c]=m,h(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),h(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=q.TEXT:e.state=q.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function N(e){if(!e.tagName)return _(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=q.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=q.SCRIPT);h(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var o=n;t--;){var i=e.tags[t];if(i.name===o)break;_(e,"Unexpected close tag")}if(0>t)return _(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=q.TEXT);e.tagName=n;for(var r=e.tags.length;r-->t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,h(e,"onclosetag",e.tagName);var a={};for(var c in s.ns)a[c]=s.ns[c];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==u.ns&&Object.keys(s.ns).forEach(function(t){var n=s.ns[t];h(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=q.TEXT}function C(e){var t,n=e.entity,o=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[o]?e.ENTITIES[o]:(n=o,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(_(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function T(e){var t=this;if(this.error)throw this.error;if(t.closed)return g(t,"Cannot write after close. Assign an onready handler.");if(null===e)return v(t);for(var n=0,o="";t.c=o=e.charAt(n++);)switch(t.trackPosition&&(t.position++,"\n"===o?(t.line++,t.column=0):t.column++),t.state){case q.BEGIN:"<"===o?(t.state=q.OPEN_WAKA,t.startTagPosition=t.position):d(D,o)&&(_(t,"Non-whitespace before first tag."),t.textNode=o,t.state=q.TEXT);continue;case q.TEXT:if(t.sawRoot&&!t.closedRoot){for(var r=n-1;o&&"<"!==o&&"&"!==o;)o=e.charAt(n++),o&&t.trackPosition&&(t.position++,"\n"===o?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(r,n-1)}"<"===o?(t.state=q.OPEN_WAKA,t.startTagPosition=t.position):(!d(D,o)||t.sawRoot&&!t.closedRoot||_(t,"Text data outside of root node."),"&"===o?t.state=q.TEXT_ENTITY:t.textNode+=o);continue;case q.SCRIPT:"<"===o?t.state=q.SCRIPT_ENDING:t.script+=o;continue;case q.SCRIPT_ENDING:"/"===o?t.state=q.CLOSE_TAG:(t.script+="<"+o,t.state=q.SCRIPT);continue;case q.OPEN_WAKA:if("!"===o)t.state=q.SGML_DECL,t.sgmlDecl="";else if(p(D,o));else if(p(V,o))t.state=q.OPEN_TAG,t.tagName=o;else if("/"===o)t.state=q.CLOSE_TAG,t.tagName="";else if("?"===o)t.state=q.PROC_INST,t.procInstName=t.procInstBody="";else{if(_(t,"Unencoded <"),t.startTagPosition+1<t.position){var s=t.position-t.startTagPosition;o=new Array(s).join(" ")+o}t.textNode+="<"+o,t.state=q.TEXT}continue;case q.SGML_DECL:(t.sgmlDecl+o).toUpperCase()===M?(h(t,"onopencdata"),t.state=q.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+o==="--"?(t.state=q.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+o).toUpperCase()===k?(t.state=q.DOCTYPE,(t.doctype||t.sawRoot)&&_(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===o?(h(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=q.TEXT):p(L,o)?(t.state=q.SGML_DECL_QUOTED,t.sgmlDecl+=o):t.sgmlDecl+=o;continue;case q.SGML_DECL_QUOTED:o===t.q&&(t.state=q.SGML_DECL,t.q=""),t.sgmlDecl+=o;continue;case q.DOCTYPE:">"===o?(t.state=q.TEXT,h(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=o,"["===o?t.state=q.DOCTYPE_DTD:p(L,o)&&(t.state=q.DOCTYPE_QUOTED,t.q=o));continue;case q.DOCTYPE_QUOTED:t.doctype+=o,o===t.q&&(t.q="",t.state=q.DOCTYPE);continue;case q.DOCTYPE_DTD:t.doctype+=o,"]"===o?t.state=q.DOCTYPE:p(L,o)&&(t.state=q.DOCTYPE_DTD_QUOTED,t.q=o);continue;case q.DOCTYPE_DTD_QUOTED:t.doctype+=o,o===t.q&&(t.state=q.DOCTYPE_DTD,t.q="");continue;case q.COMMENT:"-"===o?t.state=q.COMMENT_ENDING:t.comment+=o;continue;case q.COMMENT_ENDING:"-"===o?(t.state=q.COMMENT_ENDED,t.comment=y(t.opt,t.comment),t.comment&&h(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+o,t.state=q.COMMENT);continue;case q.COMMENT_ENDED:">"!==o?(_(t,"Malformed comment"),t.comment+="--"+o,t.state=q.COMMENT):t.state=q.TEXT;continue;case q.CDATA:"]"===o?t.state=q.CDATA_ENDING:t.cdata+=o;continue;case q.CDATA_ENDING:"]"===o?t.state=q.CDATA_ENDING_2:(t.cdata+="]"+o,t.state=q.CDATA);continue;case q.CDATA_ENDING_2:">"===o?(t.cdata&&h(t,"oncdata",t.cdata),h(t,"onclosecdata"),t.cdata="",t.state=q.TEXT):"]"===o?t.cdata+="]":(t.cdata+="]]"+o,t.state=q.CDATA);continue;case q.PROC_INST:"?"===o?t.state=q.PROC_INST_ENDING:p(D,o)?t.state=q.PROC_INST_BODY:t.procInstName+=o;continue;case q.PROC_INST_BODY:if(!t.procInstBody&&p(D,o))continue;"?"===o?t.state=q.PROC_INST_ENDING:t.procInstBody+=o;continue;case q.PROC_INST_ENDING:">"===o?(h(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=q.TEXT):(t.procInstBody+="?"+o,t.state=q.PROC_INST_BODY);continue;case q.OPEN_TAG:p(G,o)?t.tagName+=o:(x(t),">"===o?E(t):"/"===o?t.state=q.OPEN_TAG_SLASH:(d(D,o)&&_(t,"Invalid character in tag name"),t.state=q.ATTRIB));continue;case q.OPEN_TAG_SLASH:">"===o?(E(t,!0),N(t)):(_(t,"Forward-slash in opening tag not followed by >"),t.state=q.ATTRIB);continue;case q.ATTRIB:if(p(D,o))continue;">"===o?E(t):"/"===o?t.state=q.OPEN_TAG_SLASH:p(V,o)?(t.attribName=o,t.attribValue="",t.state=q.ATTRIB_NAME):_(t,"Invalid attribute name");continue;case q.ATTRIB_NAME:"="===o?t.state=q.ATTRIB_VALUE:">"===o?(_(t,"Attribute without value"),t.attribValue=t.attribName,w(t),E(t)):p(D,o)?t.state=q.ATTRIB_NAME_SAW_WHITE:p(G,o)?t.attribName+=o:_(t,"Invalid attribute name");continue;case q.ATTRIB_NAME_SAW_WHITE:if("="===o)t.state=q.ATTRIB_VALUE;else{if(p(D,o))continue;_(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",h(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===o?E(t):p(V,o)?(t.attribName=o,t.state=q.ATTRIB_NAME):(_(t,"Invalid attribute name"),t.state=q.ATTRIB)}continue;case q.ATTRIB_VALUE:if(p(D,o))continue;p(L,o)?(t.q=o,t.state=q.ATTRIB_VALUE_QUOTED):(_(t,"Unquoted attribute value"),t.state=q.ATTRIB_VALUE_UNQUOTED,t.attribValue=o);continue;case q.ATTRIB_VALUE_QUOTED:if(o!==t.q){"&"===o?t.state=q.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=o;continue}w(t),t.q="",t.state=q.ATTRIB_VALUE_CLOSED;continue;case q.ATTRIB_VALUE_CLOSED:p(D,o)?t.state=q.ATTRIB:">"===o?E(t):"/"===o?t.state=q.OPEN_TAG_SLASH:p(V,o)?(_(t,"No whitespace between attributes"),t.attribName=o,t.attribValue="",t.state=q.ATTRIB_NAME):_(t,"Invalid attribute name");continue;case q.ATTRIB_VALUE_UNQUOTED:if(d(P,o)){"&"===o?t.state=q.ATTRIB_VALUE_ENTITY_U:t.attribValue+=o;continue}w(t),">"===o?E(t):t.state=q.ATTRIB;continue;case q.CLOSE_TAG:if(t.tagName)">"===o?N(t):p(G,o)?t.tagName+=o:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=q.SCRIPT):(d(D,o)&&_(t,"Invalid tagname in closing tag"),t.state=q.CLOSE_TAG_SAW_WHITE);else{if(p(D,o))continue;d(V,o)?t.script?(t.script+="</"+o,t.state=q.SCRIPT):_(t,"Invalid tagname in closing tag."):t.tagName=o}continue;case q.CLOSE_TAG_SAW_WHITE:if(p(D,o))continue;">"===o?N(t):_(t,"Invalid characters in closing tag");continue;case q.TEXT_ENTITY:case q.ATTRIB_VALUE_ENTITY_Q:case q.ATTRIB_VALUE_ENTITY_U:switch(t.state){case q.TEXT_ENTITY:var a=q.TEXT,c="textNode";break;case q.ATTRIB_VALUE_ENTITY_Q:var a=q.ATTRIB_VALUE_QUOTED,c="attribValue";break;case q.ATTRIB_VALUE_ENTITY_U:var a=q.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===o?(t[c]+=C(t),t.entity="",t.state=a):p(B,o)?t.entity+=o:(_(t,"Invalid character entity"),t[c]+="&"+t.entity+o,t.entity="",t.state=a);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&i(t),t}n.parser=function(e,t){return new o(e,t)},n.SAXParser=o,n.SAXStream=c,n.createStream=a,n.MAX_BUFFER_LENGTH=65536;var A=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){v(this)},write:T,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};try{var O=e("stream").Stream}catch(R){var O=function(){}}var j=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});c.prototype=Object.create(O.prototype,{constructor:{value:c}}),c.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var o=e("string_decoder").StringDecoder;this._decoder=new o("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},c.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},c.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===j.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),O.prototype.on.call(n,e,t)};var D="\r\n	 ",S="0124356789",I="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",L="'\"",B=S+I+"#",P=D+">",M="[CDATA[",k="DOCTYPE",$="http://www.w3.org/XML/1998/namespace",F="http://www.w3.org/2000/xmlns/",U={xml:$,xmlns:F};D=u(D),S=u(S),I=u(I);var V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,G=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;L=u(L),B=u(B),P=u(P);var q=0;n.STATE={BEGIN:q++,TEXT:q++,TEXT_ENTITY:q++,OPEN_WAKA:q++,SGML_DECL:q++,SGML_DECL_QUOTED:q++,DOCTYPE:q++,DOCTYPE_QUOTED:q++,DOCTYPE_DTD:q++,DOCTYPE_DTD_QUOTED:q++,COMMENT_STARTING:q++,COMMENT:q++,COMMENT_ENDING:q++,COMMENT_ENDED:q++,CDATA:q++,CDATA_ENDING:q++,CDATA_ENDING_2:q++,PROC_INST:q++,PROC_INST_BODY:q++,PROC_INST_ENDING:q++,OPEN_TAG:q++,OPEN_TAG_SLASH:q++,ATTRIB:q++,ATTRIB_NAME:q++,ATTRIB_NAME_SAW_WHITE:q++,ATTRIB_VALUE:q++,ATTRIB_VALUE_QUOTED:q++,ATTRIB_VALUE_CLOSED:q++,ATTRIB_VALUE_UNQUOTED:q++,ATTRIB_VALUE_ENTITY_Q:q++,ATTRIB_VALUE_ENTITY_U:q++,CLOSE_TAG:q++,CLOSE_TAG_SAW_WHITE:q++,SCRIPT:q++,SCRIPT_ENDING:q++},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],o="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=o});for(var q in n.STATE)n.STATE[n.STATE[q]]=q;q=n.STATE,String.fromCodePoint||!function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,o,i=16384,r=[],s=-1,a=arguments.length;if(!a)return"";for(var c="";++s<a;){var u=Number(arguments[s]);if(!isFinite(u)||0>u||u>1114111||t(u)!=u)throw RangeError("Invalid code point: "+u);65535>=u?r.push(u):(u-=65536,n=(u>>10)+55296,o=u%1024+56320,r.push(n,o)),(s+1==a||r.length>i)&&(c+=e.apply(null,r),r.length=0)}return c};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}("undefined"==typeof n?sax={}:n)}).call(this,void 0)},{undefined:void 0}],67:[function(t,n,o){!function(t){"use strict";function i(){this.data=[null],this.top=0}function r(){return new i}i.prototype.clear=function(){return this.data=[null],this.top=0,this},i.prototype.length=function(){return this.top},i.prototype.peek=function(){return this.data[this.top]},i.prototype.pop=function(){return this.top>0?(this.top--,this.data.pop()):void 0},i.prototype.push=function(e){return this.data[++this.top]=e,this},"undefined"!=typeof o?n.exports=r:"function"==typeof e?e(function(){return r}):t.stack=r}(this)},{}],68:[function(e,t,n){t.exports=e(72)},{72:72}],69:[function(e,t,n){"use strict";function o(){}o.prototype.get=function(e){return this.$model.properties.get(this,e)},o.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},t.exports=o},{}],70:[function(e,t,n){"use strict";function o(e){this.ns=e,this.name=e.name,this.allTypes=[],this.properties=[],this.propertiesByName={}}var i=e(181),r=e(176),s=e(87),a=e(73).parseName;t.exports=o,o.prototype.build=function(){return i(this,["ns","name","allTypes","properties","propertiesByName","bodyProperty"])},o.prototype.addProperty=function(e,t){this.addNamedProperty(e,!0);var n=this.properties;void 0!==t?n.splice(t,0,e):n.push(e)},o.prototype.replaceProperty=function(e,t){var n=e.ns,o=this.properties,i=this.propertiesByName,r=e.name!==t.name;if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}this.addNamedProperty(t,r);var s=o.indexOf(e);if(-1===s)throw new Error("property <"+n.name+"> not found in property list");o[s]=t,i[n.name]=i[n.localName]=t},o.prototype.redefineProperty=function(e){var t=e.ns.prefix,n=e.redefines.split("#"),o=a(n[0],t),i=a(n[1],o.prefix).name,r=this.propertiesByName[i];if(!r)throw new Error("refined property <"+i+"> not found");this.replaceProperty(r,e),delete e.redefines},o.prototype.addNamedProperty=function(e,t){var n=e.ns,o=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),o[n.name]=o[n.localName]=e},o.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},o.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},o.prototype.addIdProperty=function(e){var t=a(e,this.ns.prefix),n={name:t.localName,type:"String",isAttr:!0,ns:t};this.addProperty(n,0)},o.prototype.assertNotDefined=function(e,t){var n=e.name,o=this.propertiesByName[n];if(o)throw new Error("property <"+n+"> already defined; override of <"+o.definedBy.ns.name+"#"+o.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},o.prototype.hasProperty=function(e){return this.propertiesByName[e]},o.prototype.addTrait=function(e){var t=this.allTypes;-1===t.indexOf(e)&&(s(e.properties,function(t){t=r({},t,{name:t.ns.localName}),Object.defineProperty(t,"definedBy",{value:e}),t.redefines?this.redefineProperty(t):(t.isBody&&this.setBodyProperty(t),this.addProperty(t))},this),t.push(e))}},{176:176,181:181,73:73,87:87}],71:[function(e,t,n){"use strict";function o(e,t){this.model=e,this.properties=t}var i=e(87),r=e(69);t.exports=o,o.prototype.createType=function(e){function t(e){o.define(this,"$type",{value:a,enumerable:!0}),o.define(this,"$attrs",{value:{}}),o.define(this,"$parent",{writable:!0}),i(e,function(e,t){this.set(t,e)},this)}var n=this.model,o=this.properties,s=Object.create(r.prototype);i(e.properties,function(e){e.isMany||void 0===e["default"]||(s[e.name]=e["default"])}),o.defineModel(s,n),o.defineDescriptor(s,e);var a=e.ns.name;return t.prototype=s,t.hasType=s.$instanceOf=this.model.hasType,o.defineModel(t,n),o.defineDescriptor(t,e),t}},{69:69,87:87}],72:[function(e,t,n){"use strict";function o(e,t){t=t||{},this.properties=new l(this),this.factory=new c(this,this.properties),this.registry=new u(e,this.properties,t),this.typeCache={}}var i=e(174),r=e(173),s=e(87),a=e(86),c=e(71),u=e(75),l=e(74),p=e(73).parseName;t.exports=o,o.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},o.prototype.getType=function(e){var t=this.typeCache,n=i(e)?e:e.ns.name,o=t[n];return o||(e=this.registry.getEffectiveDescriptor(n),o=t[n]=this.factory.createType(e)),o},o.prototype.createAny=function(e,t,n){var o=p(e),i={$type:e},a={name:e,isGeneric:!0,ns:{prefix:o.prefix,localName:o.localName,uri:t}};return this.properties.defineDescriptor(i,a),this.properties.defineModel(i,this),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),s(n,function(e,t){r(e)&&void 0!==e.value?i[e.name]=e.value:i[t]=e}),i},o.prototype.getPackage=function(e){return this.registry.getPackage(e)},o.prototype.getPackages=function(){return this.registry.getPackages()},o.prototype.getElementDescriptor=function(e){return e.$descriptor},o.prototype.hasType=function(e,t){void 0===t&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return!!a(n.allTypes,function(e){return e.name===t})},o.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]}},{173:173,174:174,71:71,73:73,74:74,75:75,86:86,87:87}],73:[function(e,t,n){"use strict";t.exports.parseName=function(e,t){var n,o,i=e.split(/:/);if(1===i.length)n=e,o=t;else{if(2!==i.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=i[1],o=i[0]}return e=(o?o+":":"")+n,{name:e,prefix:o,localName:n}}},{}],74:[function(e,t,n){"use strict";function o(e){this.model=e}t.exports=o,o.prototype.set=function(e,t,n){var o=this.model.getPropertyDescriptor(e,t);o?Object.defineProperty(e,o.name,{enumerable:!o.isReference,writable:!0,value:n}):e.$attrs[t]=n},o.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var o=n.name;return!e[o]&&n.isMany&&Object.defineProperty(e,o,{enumerable:!n.isReference,writable:!0,value:[]
}),e[o]},o.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},o.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},o.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})}},{}],75:[function(e,t,n){"use strict";function o(e,t,n){this.options=i({generateId:"id"},n||{}),this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,r(e,this.registerPackage,this)}var i=e(176),r=e(87),s=e(76),a=e(70),c=e(73).parseName,u=s.isBuiltIn;t.exports=o,o.prototype.getPackage=function(e){return this.packageMap[e]},o.prototype.getPackages=function(){return this.packages},o.prototype.registerPackage=function(e){e=i({},e),r(e.types,function(t){this.registerType(t,e)},this),this.packageMap[e.uri]=this.packageMap[e.prefix]=e,this.packages.push(e)},o.prototype.registerType=function(e,t){e=i({},e,{superClass:(e.superClass||[]).slice(),"extends":(e["extends"]||[]).slice(),properties:(e.properties||[]).slice()});var n=c(e.name,t.prefix),o=n.name,s={};r(e.properties,function(e){var t=c(e.name,n.prefix),o=t.name;u(e.type)||(e.type=c(e.type,t.prefix).name),i(e,{ns:t,name:o}),s[o]=e}),i(e,{ns:n,name:o,propertiesByName:s}),r(e["extends"],function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(o)},this),this.definePackage(e,t),this.typeMap[o]=e},o.prototype.mapTypes=function(e,t){function n(n){var o=c(n,u(n)?"":e.prefix);i.mapTypes(o,t)}var o=u(e.name)?{name:e.name}:this.typeMap[e.name],i=this;if(!o)throw new Error("unknown type <"+e.name+">");r(o.superClass,n),t(o),r(o.traits,n)},o.prototype.getEffectiveDescriptor=function(e){var t=c(e),n=new a(t);this.mapTypes(t,function(e){n.addTrait(e)});var o=this.options.generateId;o&&!n.hasProperty(o)&&n.addIdProperty(o);var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},o.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})}},{176:176,70:70,73:73,76:76,87:87}],76:[function(e,t,n){"use strict";var o={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},i={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};t.exports.coerceType=function(e,t){var n=i[e];return n?n(t):t},t.exports.isBuiltIn=function(e){return!!o[e]},t.exports.isSimple=function(e){return!!i[e]}},{}],77:[function(e,t,n){t.exports={name:"DMN",uri:"http://www.omg.org/spec/DMN/20130901",prefix:"dmn",types:[{name:"DMNElement",properties:[{name:"description",type:"String"},{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0}]},{name:"DMNElementReference",properties:[{name:"href",type:"String",isAttr:!0}]},{name:"Definitions",superClass:["DMNElement"],properties:[{name:"namespace",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0,"default":"http://www.omg.org/spec/FEEL/20140401"},{name:"expressionLanguage",type:"String",isAttr:!0,"default":"http://www.omg.org/spec/FEEL/20140401"},{name:"ItemDefinition",type:"ItemDefinition",isMany:!0},{name:"Decision",type:"Decision",isMany:!0}]},{name:"ItemDefinition",superClass:["DMNElement"],properties:[{name:"typeDefinition",type:"String"},{name:"typeLanguage",type:"String",isAttr:!0},{name:"isCollection",type:"Boolean",isAttr:!0,"default":!1},{name:"typeRef",type:"String",isAttr:!0},{name:"allowedValue",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",superClass:["DMNElement"],properties:[{name:"inputVariable",type:"DMNElement",isReference:!0},{name:"itemDefinition",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"}]},{name:"DRGElement",superClass:["DMNElement"],properties:[]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",isAttr:!0},{name:"allowedAnswers",type:"String",isAttr:!0},{name:"DecisionTable",type:"DecisionTable"},{name:"outputDefinition",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"hitPolicy",type:"HitPolicy",isAttr:!0,"default":"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"isComplete",type:"Boolean",isAttr:!0,"default":!1},{name:"isConsistent",type:"Boolean",isAttr:!0,"default":!1},{name:"clause",type:"Clause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}}]},{name:"Clause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"outputDefinition",type:"DMNElementReference",xml:{serialize:"property"}},{name:"inputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"condition",type:"Expression",isReference:!0,isMany:!0},{name:"conclusion",type:"Expression",isReference:!0,isMany:!0}]}],emumerations:[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]}]}},{}],78:[function(e,t,n){"use strict";function o(e){e=e||[128,36,1],this._seed=e.length?i.rack(e[0],e[1],e[2]):e}var i=e(79);t.exports=o,o.prototype.next=function(e){return this._seed(e||!0)},o.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n},o.prototype.claim=function(e,t){this._seed.set(e,t||!0)},o.prototype.assigned=function(e){return this._seed.get(e)||!1},o.prototype.unclaim=function(e){delete this._seed.hats[e]}},{79:79}],79:[function(e,t,n){var o=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),0>=e)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;for(var r=n-Math.floor(n),s="",i=0;i<Math.floor(n);i++){var a=Math.floor(Math.random()*t).toString(t);s=a+s}if(r){var c=Math.pow(t,r),a=Math.floor(Math.random()*c).toString(t);s=a+s}var u=parseInt(s,t);return u!==1/0&&u>=Math.pow(2,e)?o(e,t):s};o.rack=function(e,t,n){var i=function(i){var s=0;do{if(s++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var a=o(e,t)}while(Object.hasOwnProperty.call(r,a));return r[a]=i,a},r=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=t||16,i}},{}],80:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],81:[function(e,t,n){function o(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=o},{}],82:[function(e,t,n){function o(e,t,n,o){var c=e?e.length:0;return c?(null!=t&&"boolean"!=typeof t&&(o=n,n=s(e,t,o)?void 0:t,t=!1),n=null==n?n:i(n,o,3),t?a(e,n):r(e,n)):[]}var i=e(105),r=e(136),s=e(157),a=e(165);t.exports=o},{105:105,136:136,157:157,165:165}],83:[function(e,t,n){t.exports=e(82)},{82:82}],84:[function(e,t,n){function o(e,t,n){var o=a(e)?i:s;return n&&c(e,t,n)&&(t=void 0),("function"!=typeof t||void 0!==n)&&(t=r(t,n,3)),o(e,t)}var i=e(97),r=e(105),s=e(112),a=e(169),c=e(157);t.exports=o},{105:105,112:112,157:157,169:169,97:97}],85:[function(e,t,n){function o(e,t,n){var o=a(e)?i:s;return t=r(t,n,3),o(e,t)}var i=e(98),r=e(105),s=e(113),a=e(169);t.exports=o},{105:105,113:113,169:169,98:98}],86:[function(e,t,n){var o=e(110),i=e(145),r=i(o);t.exports=r},{110:110,145:145}],87:[function(e,t,n){var o=e(95),i=e(110),r=e(146),s=r(o,i);t.exports=s},{110:110,146:146,95:95}],88:[function(e,t,n){var o=e(96),i=e(111),r=e(146),s=r(o,i);t.exports=s},{111:111,146:146,96:96}],89:[function(e,t,n){function o(e,t,n){var o=a(e)?i:s;return t=r(t,n,3),o(e,t)}var i=e(99),r=e(105),s=e(127),a=e(169);t.exports=o},{105:105,127:127,169:169,99:99}],90:[function(e,t,n){var o=e(101),i=e(110),r=e(147),s=r(o,i);t.exports=s},{101:101,110:110,147:147}],91:[function(e,t,n){function o(e,t,n){if(null==e)return[];n&&c(e,t,n)&&(t=void 0);var o=-1;t=i(t,n,3);var u=r(e,function(e,n,i){return{criteria:t(e,n,i),index:++o,value:e}});return s(u,a)}var i=e(105),r=e(127),s=e(134),a=e(140),c=e(157);t.exports=o},{105:105,127:127,134:134,140:140,157:157}],92:[function(e,t,n){var o=e(108),i=e(93),r=i(function(e,t){return o(e,1,t)});t.exports=r},{108:108,93:93}],93:[function(e,t,n){function o(e,t){if("function"!=typeof e)throw new TypeError(i);return t=r(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,o=-1,i=r(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(o=-1;++o<t;)a[o]=n[o];return a[t]=s,e.apply(this,a)}}var i="Expected a function",r=Math.max;t.exports=o},{}],94:[function(e,t,n){(function(n){function o(e){var t=e?e.length:0;for(this.data={hash:a(null),set:new s};t--;)this.push(e[t])}var i=e(139),r=e(153),s=r(n,"Set"),a=r(Object,"create");o.prototype.push=i,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{139:139,153:153}],95:[function(e,t,n){function o(e,t){for(var n=-1,o=e.length;++n<o&&t(e[n],n,e)!==!1;);return e}t.exports=o},{}],96:[function(e,t,n){function o(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}t.exports=o},{}],97:[function(e,t,n){function o(e,t){for(var n=-1,o=e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}t.exports=o},{}],98:[function(e,t,n){function o(e,t){for(var n=-1,o=e.length,i=-1,r=[];++n<o;){var s=e[n];t(s,n,e)&&(r[++i]=s)}return r}t.exports=o},{}],99:[function(e,t,n){function o(e,t){for(var n=-1,o=e.length,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}t.exports=o},{}],100:[function(e,t,n){function o(e,t){for(var n=-1,o=t.length,i=e.length;++n<o;)e[i+n]=t[n];return e}t.exports=o},{}],101:[function(e,t,n){function o(e,t,n,o){var i=-1,r=e.length;for(o&&r&&(n=e[++i]);++i<r;)n=t(n,e[i],i,e);return n}t.exports=o},{}],102:[function(e,t,n){function o(e,t){for(var n=-1,o=e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}t.exports=o},{}],103:[function(e,t,n){function o(e,t,n){for(var o=-1,r=i(t),s=r.length;++o<s;){var a=r[o],c=e[a],u=n(c,t[a],a,e,t);(u===u?u===c:c!==c)&&(void 0!==c||a in e)||(e[a]=u)}return e}var i=e(177);t.exports=o},{177:177}],104:[function(e,t,n){function o(e,t){return null==t?e:i(t,r(t),e)}var i=e(107),r=e(177);t.exports=o},{107:107,177:177}],105:[function(e,t,n){function o(e,t,n){var o=typeof e;return"function"==o?void 0===t?e:s(e,t,n):null==e?a:"object"==o?i(e):void 0===t?c(e):r(e,t)}var i=e(128),r=e(129),s=e(137),a=e(182),c=e(183);t.exports=o},{128:128,129:129,137:137,182:182,183:183}],106:[function(e,t,n){function o(e,t){if(e!==t){var n=null===e,o=void 0===e,i=e===e,r=null===t,s=void 0===t,a=t===t;if(e>t&&!r||!i||n&&!s&&a||o&&a)return 1;if(t>e&&!n||!a||r&&!o&&i||s&&i)return-1}return 0}t.exports=o},{}],107:[function(e,t,n){function o(e,t,n){n||(n={});for(var o=-1,i=t.length;++o<i;){var r=t[o];n[r]=e[r]}return n}t.exports=o},{}],108:[function(e,t,n){function o(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}var i="Expected a function";t.exports=o},{}],109:[function(e,t,n){function o(e,t){var n=e?e.length:0,o=[];if(!n)return o;var c=-1,u=i,l=!0,p=l&&t.length>=a?s(t):null,d=t.length;p&&(u=r,l=!1,t=p);e:for(;++c<n;){var f=e[c];if(l&&f===f){for(var h=d;h--;)if(t[h]===f)continue e;o.push(f)}else u(t,f,0)<0&&o.push(f)}return o}var i=e(123),r=e(138),s=e(144),a=200;t.exports=o},{123:123,138:138,144:144}],110:[function(e,t,n){var o=e(119),i=e(142),r=i(o);t.exports=r},{119:119,142:142}],111:[function(e,t,n){var o=e(120),i=e(142),r=i(o,!0);t.exports=r},{120:120,142:142}],112:[function(e,t,n){function o(e,t){var n=!0;return i(e,function(e,o,i){return n=!!t(e,o,i)}),n}var i=e(110);t.exports=o},{110:110}],113:[function(e,t,n){function o(e,t){var n=[];return i(e,function(e,o,i){t(e,o,i)&&n.push(e)}),n}var i=e(110);t.exports=o},{110:110}],114:[function(e,t,n){function o(e,t,n,o){var i;return n(e,function(e,n,r){return t(e,n,r)?(i=o?n:e,!1):void 0}),i}t.exports=o},{}],115:[function(e,t,n){function o(e,t,n){for(var o=e.length,i=n?o:-1;n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}t.exports=o},{}],116:[function(e,t,n){function o(e,t,n,u){u||(u=[]);for(var l=-1,p=e.length;++l<p;){var d=e[l];c(d)&&a(d)&&(n||s(d)||r(d))?t?o(d,t,n,u):i(u,d):n||(u[u.length]=d)}return u}var i=e(100),r=e(168),s=e(169),a=e(155),c=e(160);t.exports=o},{100:100,155:155,160:160,168:168,169:169}],117:[function(e,t,n){var o=e(143),i=o();t.exports=i},{143:143}],118:[function(e,t,n){function o(e,t){return i(e,t,r)}var i=e(117),r=e(178);t.exports=o},{117:117,178:178}],119:[function(e,t,n){function o(e,t){return i(e,t,r)}var i=e(117),r=e(177);t.exports=o},{117:117,177:177}],120:[function(e,t,n){function o(e,t){return i(e,t,r)}var i=e(121),r=e(177);t.exports=o},{121:121,177:177}],121:[function(e,t,n){var o=e(143),i=o(!0);t.exports=i},{143:143}],122:[function(e,t,n){function o(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var o=0,r=t.length;null!=e&&r>o;)e=e[t[o++]];return o&&o==r?e:void 0}}var i=e(166);t.exports=o},{166:166}],123:[function(e,t,n){function o(e,t,n){if(t!==t)return i(e,n);for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1}var i=e(154);t.exports=o},{154:154}],124:[function(e,t,n){function o(e,t,n,a,c,u){return e===t?!0:null==e||null==t||!r(e)&&!s(t)?e!==e&&t!==t:i(e,t,o,n,a,c,u)}var i=e(125),r=e(173),s=e(160);t.exports=o},{125:125,160:160,173:173}],125:[function(e,t,n){function o(e,t,n,o,d,m,y){var g=a(e),v=a(t),_=l,x=l;g||(_=h.call(e),_==u?_=p:_!=p&&(g=c(e))),v||(x=h.call(t),x==u?x=p:x!=p&&(v=c(t)));var b=_==p,w=x==p,E=_==x;if(E&&!g&&!b)return r(e,t,_);if(!d){var N=b&&f.call(e,"__wrapped__"),C=w&&f.call(t,"__wrapped__");if(N||C)return n(N?e.value():e,C?t.value():t,o,d,m,y)}if(!E)return!1;m||(m=[]),y||(y=[]);for(var T=m.length;T--;)if(m[T]==e)return y[T]==t;m.push(e),y.push(t);var A=(g?i:s)(e,t,n,o,d,m,y);return m.pop(),y.pop(),A}var i=e(148),r=e(149),s=e(150),a=e(169),c=e(175),u="[object Arguments]",l="[object Array]",p="[object Object]",d=Object.prototype,f=d.hasOwnProperty,h=d.toString;t.exports=o},{148:148,149:149,150:150,169:169,175:175}],126:[function(e,t,n){function o(e,t,n){var o=t.length,s=o,a=!n;if(null==e)return!s;for(e=r(e);o--;){var c=t[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){c=t[o];var u=c[0],l=e[u],p=c[1];if(a&&c[2]){if(void 0===l&&!(u in e))return!1}else{var d=n?n(l,p,u):void 0;if(!(void 0===d?i(p,l,n,!0):d))return!1}}return!0}var i=e(124),r=e(166);t.exports=o},{124:124,166:166}],127:[function(e,t,n){function o(e,t){var n=-1,o=r(e)?Array(e.length):[];return i(e,function(e,i,r){o[++n]=t(e,i,r)}),o}var i=e(110),r=e(155);t.exports=o},{110:110,155:155}],128:[function(e,t,n){function o(e){var t=r(e);if(1==t.length&&t[0][2]){var n=t[0][0],o=t[0][1];return function(e){return null==e?!1:e[n]===o&&(void 0!==o||n in s(e))}}return function(e){return i(e,t)}}var i=e(126),r=e(152),s=e(166);t.exports=o},{126:126,152:152,166:166}],129:[function(e,t,n){function o(e,t){var n=a(e),o=c(e)&&u(t),f=e+"";return e=d(e),function(a){if(null==a)return!1;var c=f;if(a=p(a),(n||!o)&&!(c in a)){if(a=1==e.length?a:i(a,s(e,0,-1)),null==a)return!1;c=l(e),a=p(a)}return a[c]===t?void 0!==t||c in a:r(t,a[c],void 0,!0)}}var i=e(122),r=e(124),s=e(133),a=e(169),c=e(158),u=e(161),l=e(81),p=e(166),d=e(167);t.exports=o},{122:122,124:124,133:133,158:158,161:161,166:166,167:167,169:169,81:81}],130:[function(e,t,n){function o(e){return function(t){return null==t?void 0:t[e]}}t.exports=o},{}],131:[function(e,t,n){function o(e){var t=e+"";return e=r(e),function(n){return i(n,e,t)}}var i=e(122),r=e(167);t.exports=o},{122:122,167:167}],132:[function(e,t,n){function o(e,t,n,o,i){return i(e,function(e,i,r){n=o?(o=!1,e):t(n,e,i,r)}),n}t.exports=o},{}],133:[function(e,t,n){function o(e,t,n){var o=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=void 0===n||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(i);++o<i;)r[o]=e[o+t];return r}t.exports=o},{}],134:[function(e,t,n){function o(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}t.exports=o},{}],135:[function(e,t,n){function o(e){return null==e?"":e+""}t.exports=o},{}],136:[function(e,t,n){function o(e,t){var n=-1,o=i,c=e.length,u=!0,l=u&&c>=a,p=l?s():null,d=[];p?(o=r,u=!1):(l=!1,p=t?[]:d);e:for(;++n<c;){var f=e[n],h=t?t(f,n,e):f;if(u&&f===f){for(var m=p.length;m--;)if(p[m]===h)continue e;t&&p.push(h),d.push(f)}else o(p,h,0)<0&&((t||l)&&p.push(h),d.push(f))}return d}var i=e(123),r=e(138),s=e(144),a=200;t.exports=o},{123:123,138:138,144:144}],137:[function(e,t,n){function o(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,o,i){return e.call(t,n,o,i)};case 4:return function(n,o,i,r){return e.call(t,n,o,i,r)};case 5:return function(n,o,i,r,s){return e.call(t,n,o,i,r,s)}}return function(){return e.apply(t,arguments)}}var i=e(182);t.exports=o},{182:182}],138:[function(e,t,n){function o(e,t){var n=e.data,o="string"==typeof t||i(t)?n.set.has(t):n.hash[t];return o?0:-1}var i=e(173);t.exports=o},{173:173}],139:[function(e,t,n){function o(e){var t=this.data;"string"==typeof e||i(e)?t.set.add(e):t.hash[e]=!0}var i=e(173);t.exports=o},{173:173}],140:[function(e,t,n){function o(e,t){return i(e.criteria,t.criteria)||e.index-t.index}var i=e(106);t.exports=o},{106:106}],141:[function(e,t,n){function o(e){return s(function(t,n){var o=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,c=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=i(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),c&&r(n[0],n[1],c)&&(a=3>s?void 0:a,s=1);++o<s;){var l=n[o];l&&e(t,l,a)}return t})}var i=e(137),r=e(157),s=e(93);t.exports=o},{137:137,157:157,93:93}],142:[function(e,t,n){function o(e,t){return function(n,o){var a=n?i(n):0;if(!r(a))return e(n,o);for(var c=t?a:-1,u=s(n);(t?c--:++c<a)&&o(u[c],c,u)!==!1;);return n}}var i=e(151),r=e(159),s=e(166);t.exports=o},{151:151,159:159,166:166}],143:[function(e,t,n){function o(e){return function(t,n,o){for(var r=i(t),s=o(t),a=s.length,c=e?a:-1;e?c--:++c<a;){var u=s[c];if(n(r[u],u,r)===!1)break}return t}}var i=e(166);t.exports=o},{166:166}],144:[function(e,t,n){(function(n){function o(e){return a&&s?new i(e):null}var i=e(94),r=e(153),s=r(n,"Set"),a=r(Object,"create");t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{153:153,94:94}],145:[function(e,t,n){function o(e,t){return function(n,o,c){if(o=i(o,c,3),a(n)){var u=s(n,o,t);return u>-1?n[u]:void 0}return r(n,o,e)}}var i=e(105),r=e(114),s=e(115),a=e(169);t.exports=o},{105:105,114:114,115:115,169:169}],146:[function(e,t,n){function o(e,t){return function(n,o,s){return"function"==typeof o&&void 0===s&&r(n)?e(n,o):t(n,i(o,s,3))}}var i=e(137),r=e(169);t.exports=o},{137:137,169:169}],147:[function(e,t,n){function o(e,t){return function(n,o,a,c){var u=arguments.length<3;return"function"==typeof o&&void 0===c&&s(n)?e(n,o,a,u):r(n,i(o,c,4),a,u,t)}}var i=e(105),r=e(132),s=e(169);t.exports=o},{105:105,132:132,169:169}],148:[function(e,t,n){function o(e,t,n,o,r,s,a){var c=-1,u=e.length,l=t.length;if(u!=l&&!(r&&l>u))return!1;for(;++c<u;){var p=e[c],d=t[c],f=o?o(r?d:p,r?p:d,c):void 0;if(void 0!==f){if(f)continue;return!1}if(r){if(!i(t,function(e){return p===e||n(p,e,o,r,s,a)}))return!1}else if(p!==d&&!n(p,d,o,r,s,a))return!1}return!0}var i=e(102);t.exports=o},{102:102}],149:[function(e,t,n){function o(e,t,n){switch(n){case i:case r:return+e==+t;case s:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:e==+t;case c:case u:return e==t+""}return!1}var i="[object Boolean]",r="[object Date]",s="[object Error]",a="[object Number]",c="[object RegExp]",u="[object String]";t.exports=o},{}],150:[function(e,t,n){function o(e,t,n,o,r,a,c){var u=i(e),l=u.length,p=i(t),d=p.length;if(l!=d&&!r)return!1;for(var f=l;f--;){var h=u[f];if(!(r?h in t:s.call(t,h)))return!1}for(var m=r;++f<l;){h=u[f];var y=e[h],g=t[h],v=o?o(r?g:y,r?y:g,h):void 0;if(!(void 0===v?n(y,g,o,r,a,c):v))return!1;m||(m="constructor"==h)}if(!m){var _=e.constructor,x=t.constructor;if(_!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x))return!1}return!0}var i=e(177),r=Object.prototype,s=r.hasOwnProperty;t.exports=o},{177:177}],151:[function(e,t,n){var o=e(130),i=o("length");t.exports=i},{130:130}],152:[function(e,t,n){function o(e){for(var t=r(e),n=t.length;n--;)t[n][2]=i(t[n][1]);return t}var i=e(161),r=e(180);t.exports=o},{161:161,180:180}],153:[function(e,t,n){function o(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}var i=e(171);t.exports=o},{171:171}],154:[function(e,t,n){function o(e,t,n){for(var o=e.length,i=t+(n?0:-1);n?i--:++i<o;){var r=e[i];if(r!==r)return i}return-1}t.exports=o},{}],155:[function(e,t,n){function o(e){return null!=e&&r(i(e))}var i=e(151),r=e(159);t.exports=o},{151:151,159:159}],156:[function(e,t,n){function o(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?r:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,r=9007199254740991;t.exports=o},{}],157:[function(e,t,n){function o(e,t,n){if(!s(n))return!1;var o=typeof t;if("number"==o?i(n)&&r(t,n.length):"string"==o&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}var i=e(155),r=e(156),s=e(173);t.exports=o},{155:155,156:156,173:173}],158:[function(e,t,n){function o(e,t){var n=typeof e;if("string"==n&&a.test(e)||"number"==n)return!0;if(i(e))return!1;var o=!s.test(e);return o||null!=t&&e in r(t)}var i=e(169),r=e(166),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=o},{166:166,169:169}],159:[function(e,t,n){function o(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=o},{}],160:[function(e,t,n){function o(e){return!!e&&"object"==typeof e}t.exports=o},{}],161:[function(e,t,n){function o(e){return e===e&&!i(e)}var i=e(173);t.exports=o},{173:173}],162:[function(e,t,n){function o(e,t){e=i(e);for(var n=-1,o=t.length,r={};++n<o;){var s=t[n];s in e&&(r[s]=e[s])}return r}var i=e(166);t.exports=o},{166:166}],163:[function(e,t,n){function o(e,t){var n={};return i(e,function(e,o,i){t(e,o,i)&&(n[o]=e)}),n}var i=e(118);t.exports=o},{118:118}],164:[function(e,t,n){function o(e){for(var t=c(e),n=t.length,o=n&&e.length,u=!!o&&a(o)&&(r(e)||i(e)),p=-1,d=[];++p<n;){var f=t[p];(u&&s(f,o)||l.call(e,f))&&d.push(f)}return d}var i=e(168),r=e(169),s=e(156),a=e(159),c=e(178),u=Object.prototype,l=u.hasOwnProperty;t.exports=o},{156:156,159:159,168:168,169:169,178:178}],165:[function(e,t,n){function o(e,t){for(var n,o=-1,i=e.length,r=-1,s=[];++o<i;){var a=e[o],c=t?t(a,o,e):a;o&&n===c||(n=c,s[++r]=a)}return s}t.exports=o},{}],166:[function(e,t,n){function o(e){return i(e)?e:Object(e)}var i=e(173);t.exports=o},{173:173}],167:[function(e,t,n){function o(e){if(r(e))return e;var t=[];return i(e).replace(s,function(e,n,o,i){t.push(o?i.replace(a,"$1"):n||e)}),t}var i=e(135),r=e(169),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=o},{135:135,169:169}],168:[function(e,t,n){function o(e){return r(e)&&i(e)&&a.call(e,"callee")&&!c.call(e,"callee")}var i=e(155),r=e(160),s=Object.prototype,a=s.hasOwnProperty,c=s.propertyIsEnumerable;t.exports=o},{155:155,160:160}],169:[function(e,t,n){var o=e(153),i=e(159),r=e(160),s="[object Array]",a=Object.prototype,c=a.toString,u=o(Array,"isArray"),l=u||function(e){return r(e)&&i(e.length)&&c.call(e)==s};t.exports=l},{153:153,159:159,160:160}],170:[function(e,t,n){function o(e){return i(e)&&a.call(e)==r}var i=e(173),r="[object Function]",s=Object.prototype,a=s.toString;t.exports=o},{173:173}],171:[function(e,t,n){function o(e){return null==e?!1:i(e)?l.test(c.call(e)):r(e)&&s.test(e)}var i=e(170),r=e(160),s=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,u=a.hasOwnProperty,l=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=o},{160:160,170:170}],172:[function(e,t,n){function o(e){return"number"==typeof e||i(e)&&a.call(e)==r}var i=e(160),r="[object Number]",s=Object.prototype,a=s.toString;t.exports=o},{160:160}],173:[function(e,t,n){function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=o},{}],174:[function(e,t,n){function o(e){return"string"==typeof e||i(e)&&a.call(e)==r}var i=e(160),r="[object String]",s=Object.prototype,a=s.toString;t.exports=o},{160:160}],175:[function(e,t,n){function o(e){return r(e)&&i(e.length)&&!!R[D.call(e)]}var i=e(159),r=e(160),s="[object Arguments]",a="[object Array]",c="[object Boolean]",u="[object Date]",l="[object Error]",p="[object Function]",d="[object Map]",f="[object Number]",h="[object Object]",m="[object RegExp]",y="[object Set]",g="[object String]",v="[object WeakMap]",_="[object ArrayBuffer]",x="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",E="[object Int16Array]",N="[object Int32Array]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",A="[object Uint16Array]",O="[object Uint32Array]",R={};R[x]=R[b]=R[w]=R[E]=R[N]=R[C]=R[T]=R[A]=R[O]=!0,R[s]=R[a]=R[_]=R[c]=R[u]=R[l]=R[p]=R[d]=R[f]=R[h]=R[m]=R[y]=R[g]=R[v]=!1;var j=Object.prototype,D=j.toString;t.exports=o},{159:159,160:160}],176:[function(e,t,n){var o=e(103),i=e(104),r=e(141),s=r(function(e,t,n){return n?o(e,t,n):i(e,t)});t.exports=s},{103:103,104:104,141:141}],177:[function(e,t,n){var o=e(153),i=e(155),r=e(173),s=e(164),a=o(Object,"keys"),c=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?s(e):r(e)?a(e):[]}:s;t.exports=c},{153:153,155:155,164:164,173:173}],178:[function(e,t,n){function o(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(r(e)||i(e))&&t||0;for(var n=e.constructor,o=-1,u="function"==typeof n&&n.prototype===e,p=Array(t),d=t>0;++o<t;)p[o]=o+"";for(var f in e)d&&s(f,t)||"constructor"==f&&(u||!l.call(e,f))||p.push(f);return p}var i=e(168),r=e(169),s=e(156),a=e(159),c=e(173),u=Object.prototype,l=u.hasOwnProperty;t.exports=o},{156:156,159:159,168:168,169:169,173:173}],179:[function(e,t,n){var o=e(99),i=e(109),r=e(116),s=e(137),a=e(178),c=e(162),u=e(163),l=e(93),p=l(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=o(r(t),String);return c(e,i(a(e),t))}var n=s(t[0],t[1],3);return u(e,function(e,t,o){return!n(e,t,o)})});t.exports=p},{109:109,116:116,137:137,162:162,163:163,178:178,93:93,99:99}],180:[function(e,t,n){function o(e){e=r(e);for(var t=-1,n=i(e),o=n.length,s=Array(o);++t<o;){var a=n[t];s[t]=[a,e[a]]}return s}var i=e(177),r=e(166);t.exports=o},{166:166,177:177}],181:[function(e,t,n){var o=e(116),i=e(137),r=e(162),s=e(163),a=e(93),c=a(function(e,t){return null==e?{}:"function"==typeof t[0]?s(e,i(t[0],t[1],3)):r(e,o(t))});t.exports=c},{116:116,137:137,162:162,163:163,93:93}],182:[function(e,t,n){function o(e){return e}t.exports=o},{}],183:[function(e,t,n){function o(e){return s(e)?i(e):r(e)}var i=e(130),r=e(131),s=e(158);t.exports=o},{130:130,131:131,158:158}],184:[function(e,t,n){t.exports=function(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}},{}],185:[function(e,t,n){t.exports=e(193)},{193:193}],186:[function(e,t,n){t.exports=function(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}},{}],187:[function(e,t,n){t.exports=e(196)},{196:196}],188:[function(e,t,n){t.exports=e(200)},{200:200}],189:[function(e,t,n){t.exports=e(197)},{197:197}],190:[function(e,t,n){t.exports=e(198)},{198:198}],191:[function(e,t,n){t.exports=e(199)},{199:199}],192:[function(e,t,n){t.exports=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{}],193:[function(e,t,n){function o(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var i=e(194),r=/\s+/,s=Object.prototype.toString;t.exports=function(e){return new o(e)},o.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=i(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},o.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=i(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},o.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},o.prototype.toggle=function(e,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!=typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},o.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(r);return""===n[0]&&n.shift(),n},o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}},{194:194}],194:[function(e,t,n){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],195:[function(e,t,n){var o=e(198);t.exports=function(e,t,n,i){for(e=n?{parentNode:e}:e,i=i||document;(e=e.parentNode)&&e!==document;){if(o(e,t))return e;if(e===i)return}}},{198:198}],196:[function(e,t,n){var o=e(195),i=e(197);n.bind=function(e,t,n,r,s){return i.bind(e,n,function(n){var i=n.target||n.srcElement;n.delegateTarget=o(i,t,!0,e),n.delegateTarget&&r.call(e,n)},s)},n.unbind=function(e,t,n,o){i.unbind(e,t,n,o)}},{195:195,197:197}],197:[function(e,t,n){var o=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",r="addEventListener"!==o?"on":"";n.bind=function(e,t,n,i){return e[o](r+t,n,i||!1),n},n.unbind=function(e,t,n,o){return e[i](r+t,n,o||!1),n}},{}],198:[function(e,t,n){function o(e,t){if(!e||1!==e.nodeType)return!1;if(s)return s.call(e,t);for(var n=i.all(t,e.parentNode),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}var i=e(199),r=Element.prototype,s=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=o},{199:199}],199:[function(e,t,n){function o(e,t){return t.querySelector(e)}n=t.exports=function(e,t){return t=t||document,o(e,t)},n.all=function(e,t){return t=t||document,t.querySelectorAll(e)},n.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return o=e.one,n.all=e.all,n}},{}],200:[function(e,t,n){function o(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var o=n[1];if("body"==o){var i=t.createElement("html");return i.innerHTML=e,i.removeChild(i.lastChild)}var r=s[o]||s._default,a=r[0],c=r[1],u=r[2],i=t.createElement("div");for(i.innerHTML=c+e+u;a--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=t.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l}t.exports=o;var i,r=!1;"undefined"!=typeof document&&(i=document.createElement("div"),i.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',r=!i.getElementsByTagName("link").length,i=void 0);var s={
legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:r?[1,"X<div>","</div>"]:[0,"",""]};s.td=s.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],s.option=s.optgroup=[1,'<select multiple="multiple">',"</select>"],s.thead=s.tbody=s.colgroup=s.caption=s.tfoot=[1,"<table>","</table>"],s.polyline=s.ellipse=s.polygon=s.circle=s.text=s.line=s.path=s.rect=s.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],201:[function(e,t,n){t.exports=e(202)},{202:202}],202:[function(e,t,n){"use strict";function o(e){function t(e){return i.indexOf(e)>=0}function n(e){i.push(e)}function o(e){t(e)||((e.__depends__||[]).forEach(o),t(e)||(n(e),(e.__init__||[]).forEach(function(e){r.push(e)})))}var i=[],r=[];e.forEach(o);var a=new s.Injector(i);return r.forEach(function(e){try{a["string"==typeof e?"get":"invoke"](e)}catch(t){throw console.error("Failed to instantiate component"),console.error(t.stack),t}}),a}function i(t){t=t||{};var n={config:["value",t]},i=e(207),r=[n,i].concat(t.modules||[]);return o(r)}function r(e,t){this.injector=t=t||i(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("table.init")}var s=e(56);t.exports=r,r.prototype.destroy=function(){this.get("eventBus").fire("table.destroy")}},{207:207,56:56}],203:[function(e,t,n){"use strict";function o(){this._uid=12}var i=e(246);t.exports=o,o.prototype.createTable=function(e){return document.createElement("table")},o.prototype.createRow=function(e){return this.create("row",e)},o.prototype.createColumn=function(e){return this.create("column",e)},o.prototype.create=function(e,t){return t=t||{},t.id||(t.id=e+"_"+this._uid++),i.create(e,t)}},{246:246}],204:[function(e,t,n){"use strict";function o(){this._elements={}}var i="data-element-id";t.exports=o,o.prototype.add=function(e,t,n){var o=e.id;this._validateId(o),t.setAttribute(i,o),n&&n.setAttribute(i,o),this._elements[o]={element:e,gfx:t,secondaryGfx:n}},o.prototype.remove=function(e){var t=this._elements,n=e.id||e,o=n&&t[n];o&&(o.gfx.setAttribute(i,null),o.secondaryGfx&&o.secondaryGfx.setAttribute(i,null),delete t[n])},o.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e));var n=this.getGraphics(e),o=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,o)},o.prototype.get=function(e){var t;t="string"==typeof e?e:e&&e.getAttribute(i);var n=this._elements[t];return n&&n.element},o.prototype.filter=function(e){var t=[];return this.forEach(function(n,o){e(n,o)&&t.push(n)}),t},o.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var o=t[n],i=o.element,r=o.gfx;return e(i,r)})},o.prototype.getGraphics=function(e,t){var n=e.id||e,o=this._elements[n];return o&&(t?o.secondaryGfx:o.gfx)},o.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}},{}],205:[function(e,t,n){"use strict";function o(e,t){this._renderer=t,this._elementRegistry=e}var i=e(87);o.$inject=["elementRegistry","renderer"],t.exports=o,o.prototype.create=function(e,t,n){var o;switch(e){case"row":o=document.createElement("tr");break;case"cell":o=document.createElement(t.row.useTH?"th":"td");var i=document.createElement("span");o.appendChild(i)}if(o&&"row"===e)t.next?n.insertBefore(o,this._elementRegistry.getGraphics(t.next)):n.appendChild(o);else if("cell"===e){var r=this._elementRegistry.filter(function(e){return e.row===t.row&&e.column===t.column.next})[0];r?n.insertBefore(o,this._elementRegistry.getGraphics(r)):n.appendChild(o)}return o||document.createElement("div")},o.prototype.update=function(e,t,n){if(t.parent){var o=this;if("row"===e)this._renderer.drawRow(n,t),i(this._elementRegistry.filter(function(e){return e.row===t}),function(e){o.update("cell",e,o._elementRegistry.getGraphics(e))});else if("column"===e)this._renderer.drawColumn(n,t),i(this._elementRegistry.filter(function(e){return e.column===t}),function(e){o.update("cell",e,o._elementRegistry.getGraphics(e))});else{if("cell"!==e)throw new Error("unknown type: "+e);this._renderer.drawCell(n,t)}}},o.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);t.parentNode&&t.parentNode.removeChild(t)}},{87:87}],206:[function(e,t,n){"use strict";function o(e){return s(e)?e+"px":e}function i(e){e=a({},{width:"100%",height:"100%"},e);var t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","tjs-container"),a(n.style,{position:"relative",overflow:"hidden",width:o(e.width),height:o(e.height)}),t.appendChild(n),n}function r(e,t,n,o){this._eventBus=t,this._elementRegistry=n,this._graphicsFactory=o,this._init(e||{})}var s=e(172),a=e(176),c=e(87),u=e(84),l={row:["next","previous"],column:["next","previous"],cell:["row","column"]};r.$inject=["config.sheet","eventBus","elementRegistry","graphicsFactory"],t.exports=r,r.prototype.getLastColumn=function(){return this._lastColumn},r.prototype.setLastColumn=function(e){this._lastColumn=e},r.prototype.getLastRow=function(e){return this._lastRow[e]},r.prototype.setLastRow=function(e,t){this._lastRow[t]=e},r.prototype.setSibling=function(e,t){e&&(e.next=t),t&&(t.previous=e)},r.prototype.addSiblings=function(e,t){var n,o;if("row"===e&&(o=t.isHead?"head":t.isFoot?"foot":"body"),t.previous||t.next){if(t.previous&&!t.next)n=t.previous.next,this.setSibling(t.previous,t),this.setSibling(t,n);else if(!t.previous&&t.next)n=t.next.previous,this.setSibling(n,t),this.setSibling(t,t.next);else if(t.previous&&t.next){if(t.previous.next!==t.next)throw new Error("cannot set both previous and next when adding new element <"+e+">");this.setSibling(t.previous,t),this.setSibling(t,t.next)}}else"column"===e?(t.next=null,this.setSibling(this.getLastColumn(),t),this.setLastColumn(t)):"row"===e&&(t.next=null,this.setSibling(this.getLastRow(o),t),this.setLastRow(t,o))},r.prototype.removeSiblings=function(e,t){var n;"row"===e&&(n=t.isHead?"head":t.isFoot?"foot":"body"),"column"===e?this.getLastColumn()===t&&this.setLastColumn(t.previous):"row"===e&&this.getLastRow(n)===t&&this.setLastRow(t.previous,n),t.previous&&(t.previous.next=t.next),t.next&&(t.next.previous=t.previous),delete t.previous,delete t.next},r.prototype._init=function(e){var t=this._eventBus,n=i(e),o=this;this._container=n,this._rootNode=document.createElement("table"),a(this._rootNode.style,{width:"100%"}),n.appendChild(this._rootNode),this._head=document.createElement("thead"),this._body=document.createElement("tbody"),this._foot=document.createElement("tfoot"),this._rootNode.appendChild(this._head),this._rootNode.appendChild(this._body),this._rootNode.appendChild(this._foot),this._lastColumn=null,this._lastRow={head:null,body:null,foot:null},t.on("table.init",function(e){t.fire("sheet.init",{sheet:o._rootNode})}),t.on("table.destroy",function(){var e=o._container.parentNode;e&&e.removeChild(n),t.fire("sheet.destroy",{sheet:o._rootNode})})},r.prototype.getContainer=function(){return this._container},r.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=l[e],o=u(n,function(e){return"undefined"!=typeof t[e]});if(!o)throw new Error("must supply { "+n.join(", ")+" } with "+e)},r.prototype._addElement=function(e,t,n){t._type=e;var o=this._eventBus,i=this._graphicsFactory;this._ensureValid(e,t),o.fire(e+".add",t),t.parent=n||this._rootNode;var r=i.create(e,t,t.parent);return this._elementRegistry.add(t,r),i.update(e,t,r),o.fire(e+".added",{element:t,gfx:r}),t},r.prototype.addRow=function(e){this.addSiblings("row",e);var t=this._addElement("row",e,e.isHead?this._head:e.isFoot?this._foot:this._body);this._eventBus.fire("cells.add",t);var n=this;return c(this._elementRegistry.filter(function(e){return"column"===e._type}).sort(function(e,t){for(var n=e;n=n.next;)if(n===t)return-1;return 1}),function(e){n._addCell({row:t,column:e,id:"cell_"+e.id+"_"+t.id})}),this._eventBus.fire("cells.added",t),t},r.prototype.addColumn=function(e){this.addSiblings("column",e);var t=this._addElement("column",e);this._eventBus.fire("cells.add",t);var n=this;return c(this._elementRegistry.filter(function(e){return"row"===e._type}),function(e){n._addCell({row:e,column:t,id:"cell_"+t.id+"_"+e.id})}),this._eventBus.fire("cells.added",t),t},r.prototype._addCell=function(e){return this._addElement("cell",e,this._elementRegistry.getGraphics(e.row.id))},r.prototype.setCellContent=function(e){"object"==typeof e.column&&(e.column=e.column.id),"object"==typeof e.row&&(e.row=e.row.id),this._elementRegistry.get("cell_"+e.column+"_"+e.row).content=e.content,this._graphicsFactory.update("cell",this._elementRegistry.get("cell_"+e.column+"_"+e.row),this._elementRegistry.getGraphics("cell_"+e.column+"_"+e.row))},r.prototype.getCellContent=function(e){return this._elementRegistry.get("cell_"+e.column+"_"+e.row).content},r.prototype._removeElement=function(e,t){var n=this._elementRegistry,o=this._graphicsFactory,i=this._eventBus;return(e=n.get(e.id||e))?(i.fire(t+".remove",{element:e}),o.remove(e),e.parent=null,n.remove(e),i.fire(t+".removed",{element:e}),e):void 0},r.prototype.removeRow=function(e){this.removeSiblings("row",e);var t=this._removeElement(e,"row");this._eventBus.fire("cells.remove",t);var n=this;return c(this._elementRegistry.filter(function(t){return t.row===e}),function(e){n._removeElement(e.id,"cell")}),this._eventBus.fire("cells.removed",t),t},r.prototype.removeColumn=function(e){this.removeSiblings("column",e);var t=this._removeElement(e,"column");this._eventBus.fire("cells.remove",t);var n=this;return c(this._elementRegistry.filter(function(t){return t.column===e}),function(e){n._removeElement(e.id,"cell")}),this._eventBus.fire("cells.removed",t),t},r.prototype.getRootElement=function(){return this._rootNode},r.prototype.setRootElement=function(e){this._rootNode=e}},{172:172,176:176,84:84,87:87}],207:[function(e,t,n){t.exports={__depends__:[e(209)],__init__:["sheet"],sheet:["type",e(206)],elementRegistry:["type",e(204)],elementFactory:["type",e(203)],graphicsFactory:["type",e(205)],eventBus:["type",e(47)]}},{203:203,204:204,205:205,206:206,209:209,47:47}],208:[function(e,t,n){"use strict";function o(e,t){this._elementRegistry=e,this._eventBus=t}var i=e(87),r=function(e,t){for(var n=0,o=e.column;o&&o!==t.column;)o=o.next,n++;return o?n:-1},s=function(e,t){for(var n=0,o=e.row;o&&o!==t.row;)o=o.next,n++;return o?n:-1};o.$inject=["elementRegistry","eventBus"],t.exports=o,o.prototype.drawRow=function(e,t){return this._eventBus.fire("row.render",{gfx:e,data:t}),e},o.prototype.drawColumn=function(e,t){return this._eventBus.fire("column.render",{gfx:e,data:t}),e},o.prototype.drawCell=function(e,t){t.colspan&&e.setAttribute("colspan",t.colspan),t.rowspan&&e.setAttribute("rowspan",t.rowspan),e.setAttribute("style","");var n=this._elementRegistry.filter(function(e){return"cell"===e._type&&e.row===t.row});return i(n,function(n){var o=r(n,t);n.colspan&&o>0&&o<n.colspan&&e.setAttribute("style","display: none;")}),n=this._elementRegistry.filter(function(e){return"cell"===e._type&&e.column===t.column}),i(n,function(n){var o=s(n,t);n.rowspan&&o>0&&o<n.rowspan&&e.setAttribute("style","display: none;")}),t.content?"string"!=typeof t.content||t.content.tagName?t.content.tagName&&e.childNodes[0].appendChild(t.content):e.childNodes[0].textContent=t.content:e.childNodes[0].textContent="",this._eventBus.fire("cell.render",{gfx:e,data:t}),e}},{87:87}],209:[function(e,t,n){t.exports={renderer:["type",e(208)]}},{208:208}],210:[function(e,t,n){"use strict";function o(e,t,n,o){this.row=null;var s=this;e.on("utilityColumn.added",function(e){var n=e.column;s.row=t.addRow({id:"tjs-controls",isFoot:!0});var a=i('<a title="Add row" class="icon-dmn icon-plus"></a>');a.addEventListener("mouseup",function(){o.createRow({id:r.next()})}),t.setCellContent({row:s.row,column:n,content:a})})}var i=e(188),r=new(e(52))("row");o.$inject=["eventBus","sheet","elementRegistry","modeling"],t.exports=o,o.prototype.getRow=function(){return this.row}},{188:188,52:52}],211:[function(e,t,n){"use strict";function o(e,t){e.on("cell.render",function(e){e.data.row===t.getRow()&&e.data.content&&(i(e.gfx).add("add-rule"),e.gfx.childNodes[0].appendChild(e.data.content))}),e.on("row.render",function(e){e.data===t.getRow()&&i(e.gfx).add("rules-controls")})}var i=e(185);o.$inject=["eventBus","addRow"],t.exports=o},{185:185}],212:[function(e,t,n){t.exports={__init__:["addRow","addRowRenderer"],__depends__:[e(238),e(245)],addRow:["type",e(210)],addRowRenderer:["type",e(211)]}},{210:210,211:211,238:238,245:245}],213:[function(e,t,n){"use strict";function o(e,t,n){e.on("element.changed",function(n){var o=n.element;n.gfx||(n.gfx=t.getGraphics(o)),n.gfx&&(o.column?e.fire("cell.changed",n):e.fire("row.changed",n))}),e.on("elements.changed",function(t){for(var n=0;n<t.elements.length;n++)e.fire("element.changed",{element:t.elements[n]})}),e.on("cell.changed",function(e){n.update("cell",e.element,e.gfx)}),e.on("row.changed",function(e){n.update("row",e.element,e.gfx);for(var o=t.filter(function(t){return t.row===e.element}),i=0;i<o.length;i++)n.update("cell",o[i],t.getGraphics(o[i]))})}o.$inject=["eventBus","elementRegistry","graphicsFactory"],t.exports=o},{}],214:[function(e,t,n){t.exports={__init__:["changeSupport"],changeSupport:["type",e(213)]}},{213:213}],215:[function(e,t,n){"use strict";function o(e){var t=this,n=i('<div>\n  <label></label>\n  <input tabindex="0" />\n  <span class="cb-caret"></span>\n</div>\n'),o=e.label,s=e.classNames,c=e.options,u=e.dropdownClassNames;this._dropdown=document.createElement("ul"),this._template=n,this._dropdownOpen=!1,this._disabled=!1,this._listeners={},a(s,function(e){r(n).add(e)}),a(u,function(e){r(t._dropdown).add(e)}),a(c,function(e){var n=document.createElement("li");n.setAttribute("tabindex","1"),n.textContent=e,t._dropdown.appendChild(n)}),n.querySelector("label").textContent=o+":",n.querySelector("span").addEventListener("click",function(e){t._toggleDropdown(c),e.stopPropagation()}),document.body.addEventListener("click",function(e){t._closeDropdown()});var l=function(e){t.setValue(e.target.textContent)};this._dropdown.addEventListener("click",function(e){l(e),e.stopPropagation(),t._closeDropdown()}),this._dropdown.addEventListener("focus",l,!0);var p=function(e){var n=e.which||e.keyCode;27===n?t._closeDropdown():13===n?t._toggleDropdown(c):9===n||40===n?(e.preventDefault(),t._focusNext(9===n&&e.shiftKey)):38===n&&(e.preventDefault(),t._focusNext(!0))};return this._dropdown.addEventListener("keydown",p),this._template.querySelector("input").addEventListener("keydown",p),this._template.querySelector("input").addEventListener("input",function(e){var n=c.filter(function(e){return-1!==e.toLowerCase().indexOf(t._template.querySelector("input").value.toLowerCase())});t._openDropdown(n),t._fireEvent("valueChanged",{newValue:t._template.querySelector("input").value})}),this}var i=e(188),r=e(185),s=e(176),a=e(87);o.prototype._focusNext=function(e){if(!this._isDropdownOpen())return void this._openDropdown();var t,n=document.activeElement;for(n===this._template.querySelector("input")?t=this._dropdown[e?"lastChild":"firstChild"]:n.parentNode===this._dropdown&&(t=n[e?"previousSibling":"nextSibling"]);t&&"none"===t.style.display;)t=t[e?"previousSibling":"nextSibling"];t||(t=this._template.querySelector("input")),t.focus()},o.prototype._toggleDropdown=function(e){this._isDropdownOpen()?this._closeDropdown():this._openDropdown(e)},o.prototype._openedDropdown=null,o.prototype._isDropdownOpen=function(){return this._dropdownOpen},o.prototype._closeDropdown=function(){this._isDropdownOpen()&&(this._dropdownOpen=!1,o.prototype._openedDropdown=null,r(this._template).remove("expanded"),this._dropdown.parentNode.removeChild(this._dropdown))},o.prototype._openDropdown=function(e){if(o.prototype._openedDropdown&&o.prototype._openedDropdown._closeDropdown(),e&&0===e.length||this._disabled)return void this._closeDropdown();a(this._dropdown.childNodes,function(t){e&&-1===e.indexOf(t.textContent)?t.style.display="none":t.style.display="block"});for(var t=this._template.querySelector("input"),n=t,i={x:0,y:0};n;)i.x+=n.offsetLeft,i.y+=n.offsetTop,n=n.offsetParent;s(this._dropdown.style,{display:"block",position:"absolute",top:i.y+t.clientHeight+"px",left:i.x+"px",width:t.clientWidth+"px"}),document.body.appendChild(this._dropdown),o.prototype._openedDropdown=this,this._dropdownOpen=!0,r(this._template).add("expanded")},o.prototype._fireEvent=function(e,t){a(this._listeners[e],function(e){e(t)})},o.prototype.setValue=function(e){this._fireEvent("valueChanged",{oldValue:this._template.querySelector("input").value,newValue:e}),this._template.querySelector("input").value=e},o.prototype.getValue=function(){return this._template.querySelector("input").value},o.prototype.getNode=function(){return this._template},o.prototype.addEventListener=function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)},o.prototype.disable=function(){this._disabled=!0,this._template.querySelector("input").setAttribute("disabled","true")},o.prototype.enable=function(){this._disabled=!1,this._template.querySelector("input").setAttribute("disabled","false")},t.exports=o},{176:176,185:185,188:188,87:87}],216:[function(e,t,n){"use strict";function o(e,t){this._eventBus=e,this._elementRegistry=t,this.setupListeners()}var i=e(176),r=e(185),s=e(192);o.prototype.setupListeners=function(){var e=this;document.body.addEventListener("click",function(t){t.preventDialogClose||e.close()}),window.addEventListener("hashchange",function(t){e.close()}),this._eventBus.on(["table.scroll","table.destroy"],function(t){e.close()}),this._eventBus.on("element.click",function(t){if(e.close(),t.originalEvent&&(t.originalEvent.preventDialogClose=!0),t.element&&t.element.complex){for(var n=e._elementRegistry.getGraphics(t.element),o=n,i={x:0,y:0};o;)i.x+=o.offsetLeft,i.y+=o.offsetTop,o=o.offsetParent;for(o=n;o&&"number"==typeof o.scrollTop&&"number"==typeof o.scrollLeft;)i.x-=o.scrollLeft,i.y-=o.scrollTop,o=o.parentNode;t.element.complex.position={x:i.x,y:i.y},e.open(t.element.complex)}})},o.prototype.close=function(){this._current&&(this._eventBus.fire("complexCell.close",this._current),s(this._current.container),this._current=null)},o.prototype.isOpen=function(){return!!this._current},o.prototype._createContainer=function(e,t){var n=document.createElement("div");if(i(n.style,{position:"absolute",left:t.x+"px",top:t.y+"px",width:"auto",height:"auto"}),n.addEventListener("click",function(e){e.stopPropagation()}),"string"==typeof e)r(n).add(e);else for(var o=0;o<e.length;o++)r(n).add(e[o]);return n},o.prototype.open=function(e){var t=e.className||"complex-cell",n=e.template;this.isOpen()&&this.close();var o={x:e.position.x+(e.offset&&e.offset.x||0),y:e.position.y+(e.offset&&e.offset.y||0)},i=document.body,r=this._createContainer(t,o);return this._attachContainer(r,i),this._attachContent(n,r),this._current={container:r,config:e},this._eventBus.fire("complexCell.open",this._current),this},o.prototype._attachContainer=function(e,t){t.appendChild(e)},o.prototype._attachContent=function(e,t){t.appendChild(e)},o.$inject=["eventBus","elementRegistry"],t.exports=o},{176:176,185:185,192:192}],217:[function(e,t,n){"use strict";t.exports={__init__:["complexCell"],complexCell:["type",e(216)]}},{216:216}],218:[function(e,t,n){"use strict";function o(e){this._eventBus=e,this.controlsContainer;var t=this;e.on("sheet.init",function(n){var o=document.createElement("div");i(o).add("tjs-controls"),t.controlsContainer=o,n.sheet.parentNode.insertBefore(o,n.sheet.parentNode.firstChild),e.fire("controls.init",{node:o,controls:t})})}var i=e(185);o.prototype.addControl=function(e,t){this._eventBus.fire("controls.add",{label:e});var n=document.createElement("a");n.textContent=e,n.addEventListener("click",t),this.controlsContainer.appendChild(n),this._eventBus.fire("controls.added",{label:e,node:n})},o.$inject=["eventBus"],t.exports=o},{185:185}],219:[function(e,t,n){"use strict";t.exports={__init__:["controls"],controls:["type",e(218)]}},{218:218}],220:[function(e,t,n){"use strict";function o(e,t,n,o,i,r,s,a,c,u){var l=function(e){var t=e.replace(/<div><br><\/div>/gi,"\n").replace(/<br(\s*)\/*>/gi,"\n").replace(/<(div|p)(\s*)\/*>/gi,"\n").replace(/(<([^>]+)>)/gi,"").trim(),n=document.createElement("textarea");return n.innerHTML=t,n.value};e.on("element.focus",function(e){if(r.allowed("cell.edit",{row:e.element.row,column:e.element.column,content:e.element.content})&&!e.element.row.isFoot&&!e.element.complex){e.gfx.childNodes[0].focus();var n=e.element;t.select(n);var o=window.getSelection();o.selectAllChildren(e.gfx.childNodes[0]);try{document.execCommand("enableInlineTableEditing",!1,"false")}catch(i){if("Invalid argument."!==i.description)throw i}}}),e.on("element.mousedown",function(e){!r.allowed("cell.edit",{row:e.element.row,column:e.element.column,content:e.element.content})||e.element.row.isFoot||t.get()===e.element||e.element.complex||(t.select(e.element),e.preventDefault(),e.gfx.childNodes[0].focus())}),e.on("element.blur",function(e){var n=e.element;t.isSelected(n)&&t.deselect()}),e.on("selection.changed",function(e){if(e.oldSelection){var t=o.getGraphics(e.oldSelection);t&&(i.editCell(e.oldSelection.row.id,e.oldSelection.column.id,l(t.innerHTML)),s.update("row",e.oldSelection.row,o.getGraphics(e.oldSelection.row)),s.update("column",e.oldSelection.column,o.getGraphics(e.oldSelection.column)))}e.newSelection&&(s.update("cell",e.newSelection,o.getGraphics(e.newSelection)),s.update("row",e.newSelection.row,o.getGraphics(e.newSelection.row)),s.update("column",e.newSelection.column,o.getGraphics(e.newSelection.column)))});var p=!1,d=null;e.on("tableName.init",function(t){r.allowed("name.edit")&&(d=t.node,e.fire("tableName.allowEdit",{editAllowed:!0}),t.node.setAttribute("contenteditable",!0),t.node.addEventListener("focus",function(e){p=!0},!0),t.node.addEventListener("blur",function(e){p=!1;var t=l(e.target.innerHTML);t!==u.getName()&&i.editName(t)},!0))}),a&&a._listeners.unshift(function(e,n){if((n.ctrlKey||n.metaKey)&&!n.shiftKey&&90===e){if(p){var o=l(d.innerHTML);o!==u.getName()&&i.editName(o)}var r=t.deselect();t.select(r)}})}o.$inject=["eventBus","selection","sheet","elementRegistry","modeling","rules","graphicsFactory","keyboard","commandStack","tableName"],t.exports=o},{}],221:[function(e,t,n){"use strict";function o(e,t){e.on("cell.render",function(e){!t.allowed("cell.edit",{row:e.data.row,column:e.data.column,content:e.data.content})||e.data.row.isFoot||e.data.complex?e.gfx.childNodes[0].setAttribute("contenteditable",!1):e.gfx.childNodes[0].setAttribute("contenteditable",!0),e.gfx.childNodes[0].setAttribute("spellcheck","false"),e.data.selected?i(e.gfx).add("focused"):i(e.gfx).remove("focused"),e.data.row.isFoot||(e.data.row.selected&&!e.data.isHead?i(e.gfx).add("row-focused"):i(e.gfx).remove("row-focused"),e.data.column.selected&&!e.data.row.useTH?i(e.gfx).add("col-focused"):i(e.gfx).remove("col-focused"))}),e.on("row.render",function(e){e.data.selected&&!e.data.isHead?i(e.gfx).add("row-focused"):i(e.gfx).remove("row-focused")})}var i=e(185);o.$inject=["eventBus","rules"],t.exports=o},{185:185}],222:[function(e,t,n){"use strict";function o(e){this._eventBus=e,this._selectedElement=null}o.$inject=["eventBus"],t.exports=o,o.prototype.deselect=function(e){if(this._selectedElement){var t=this._selectedElement;return this._selectedElement.row.selected=!1,this._selectedElement.column.selected=!1,this._selectedElement.selected=!1,this._selectedElement=null,e||this._eventBus.fire("selection.changed",{oldSelection:t,newSelection:this._selectedElement}),t}},o.prototype.get=function(){return this._selectedElement},o.prototype.isSelected=function(e){return this._selectedElement===e},o.prototype.select=function(e){if(e&&!this.isSelected(e)){var t=this._selectedElement;t&&this.deselect(!0),this._selectedElement=e,e.selected=!0,e.row.selected=!0,e.column.selected=!0,this._eventBus.fire("selection.changed",{oldSelection:t,newSelection:this._selectedElement})}}},{}],223:[function(e,t,n){t.exports={__init__:["editBehavior","editRenderer"],__depends__:[e(225),e(238),e(227),e(50)],selection:["type",e(222)],editBehavior:["type",e(220)],editRenderer:["type",e(221)]}},{220:220,221:221,222:222,225:225,227:227,238:238,50:50}],224:[function(e,t,n){"use strict";function o(e,t){function n(n,o){var i,r=o.delegateTarget||o.target,s=r,a=t.get(s);s&&a&&(i=e.fire(n,{element:a,gfx:s,originalEvent:o}),i===!1&&(o.stopPropagation(),o.preventDefault()))}function o(e){var t=m[e];return t||(t=m[e]=function(t){(s(t)||"element.contextmenu"===e)&&n(e,t)}),t}function a(e){return"focus"===e||"blur"===e}function c(e,t,n){var i=o(n);i.$delegate=r.bind(e,g,t,i,a(t))}function u(e,t,n){r.unbind(e,t,o(n).$delegate,a(t))}function l(e){i(y,function(t,n){c(e,n,t)})}function p(e){i(y,function(t,n){u(e,n,t)})}function d(t){var n=m.scroll;return n||(n=m.scroll=function(n){n.target.contains(t)&&e.fire("table.scroll",{gfx:n.target,originalEvent:n})}),n}function f(e){document.addEventListener("scroll",d(e),!0)}function h(e){document.removeEventListener("scroll",d(e),!0)}var m={},y={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup",focus:"element.focus",blur:"element.blur",contextmenu:"element.contextmenu"},g="td,th";e.on("sheet.destroy",function(e){p(e.sheet),h(e.sheet)}),e.on("sheet.init",function(e){l(e.sheet),f(e.sheet)}),this.fire=n,this.mouseHandler=o,this.registerEvent=c,this.unregisterEvent=u}var i=e(87),r=e(187),s=e(53).isPrimaryButton;o.$inject=["eventBus","elementRegistry"],t.exports=o},{187:187,53:53,87:87}],225:[function(e,t,n){t.exports={__init__:["interactionEvents"],interactionEvents:["type",e(224)]}},{224:224}],226:[function(e,t,n){"use strict";function o(e,t,n){var o=this;this._commandStack=n,this._eventBus=t,this._listeners=[],this._keyHandler=function(e){var t,n,i=e.target,r=o._listeners,s=e.keyCode||e.charCode||-1;if(!c(i,"input, textarea"))for(t=0;n=r[t];t++)n(s,e)&&(e.stopPropagation(),e.preventDefault())},t.on("table.destroy",function(){o._fire("destroy"),o.unbind(),o._listeners=null}),t.on("table.init",function(){o._fire("init"),e&&e.bindTo&&o.bind(e.bindTo)}),this._init()}function i(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function r(e){return e.ctrlKey||e.metaKey}function s(e){return e.shiftKey}var a=e(189),c=e(190);o.$inject=["config.keyboard","eventBus","commandStack"],t.exports=o,o.prototype.bind=function(e){this._node=e,a.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},o.prototype.getBinding=function(){return this._node},o.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),a.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},o.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})},o.prototype._init=function(){function e(e,t){return r(t)&&!s(t)&&90===e?(o.undo(),!0):void 0}function t(e,t){return r(t)&&(89===e||90===e&&s(t))?(o.redo(),!0):void 0}var n=this._listeners,o=this._commandStack;n.push(e),n.push(t)},o.prototype.addListener=function(e){this._listeners.push(e)},o.prototype.hasModifier=i,o.prototype.isCmd=r,o.prototype.isShift=s},{189:189,190:190}],227:[function(e,t,n){t.exports={__init__:["keyboard"],keyboard:["type",e(226)]}},{226:226}],228:[function(e,t,n){"use strict";function o(e,t){this._sheet=t,this._utilityColumn=null;var n=this;e.on("utilityColumn.added",function(e){var t=e.column;n._utilityColumn=t,n.updateLineNumbers()});var o=function(){n.updateLineNumbers()};e.on(["cells.added","row.removed"],o)}o.$inject=["eventBus","sheet"],t.exports=o,o.prototype.updateLineNumbers=function(){if(this._utilityColumn&&this._sheet.getLastRow("body")){for(var e=this._sheet.getLastRow("body");e.previous;)e=e.previous;for(var t=1;e;)this._sheet.setCellContent({row:e,column:this._utilityColumn,content:t}),t++,e=e.next}}},{}],229:[function(e,t,n){t.exports={__init__:["lineNumbers"],__depends__:[e(245)],lineNumbers:["type",e(228)]}},{228:228,245:245}],230:[function(e,t,n){"use strict";function o(e,t,n,o){this._eventBus=e,this._elementFactory=t,this._commandStack=n,this._sheet=o;var i=this;e.on("table.init",1500,function(){i._registerHandlers(n)})}var i=e(87);o.$inject=["eventBus","elementFactory","commandStack","sheet"],t.exports=o,o.prototype.getHandlers=function(){return{"row.create":e(233),"row.delete":e(235),"row.clear":e(231),"column.create":e(232),"column.delete":e(234),"cell.edit":e(236),"name.edit":e(237)}},o.prototype._registerHandlers=function(e){i(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},o.prototype.createRow=function(e){e=this._elementFactory.create("row",e);var t={row:e};return this._commandStack.execute("row.create",t),t.row},o.prototype.createColumn=function(e){e=this._elementFactory.create("column",e);var t={column:e};return this._commandStack.execute("column.create",t),t.column},o.prototype.deleteRow=function(e){var t={row:e};return this._commandStack.execute("row.delete",t),t.row},o.prototype.clearRow=function(e){var t={row:e};return this._commandStack.execute("row.clear",t),t.row},o.prototype.deleteColumn=function(e){var t={column:e};return this._commandStack.execute("column.delete",t),t.column},o.prototype.editCell=function(e,t,n){var o={row:e,column:t,content:n};return n!==this._sheet.getCellContent(o)&&this._commandStack.execute("cell.edit",o),o},o.prototype.editName=function(e){var t={newName:e};return this._commandStack.execute("name.edit",t),t}},{231:231,232:232,233:233,234:234,235:235,236:236,237:237,87:87}],231:[function(e,t,n){"use strict";function o(e,t,n){this._sheet=e,this._elementRegistry=t,this._utilityColumn=n}var i=e(87);o.$inject=["sheet","elementRegistry","utilityColumn"],t.exports=o,o.prototype.execute=function(e){var t=this,n=this._utilityColumn&&this._utilityColumn.getColumn(),o=this._elementRegistry.filter(function(t){return n?"cell"===t._type&&t.row===e.row&&t.column!==n:"cell"===t._type&&t.row===e.row});e._oldContent=[],i(o,function(n){e._oldContent.push(n.content),t._sheet.setCellContent({row:e.row,column:n.column,content:null})})},o.prototype.revert=function(e){var t=this,n=this._utilityColumn&&this._utilityColumn.getColumn(),o=this._elementRegistry.filter(function(t){return n?"cell"===t._type&&t.row===e.row&&t.column!==n:"cell"===t._type&&t.row===e.row}),r=0;i(o,function(n){t._sheet.setCellContent({row:e.row,column:n.column,content:e._oldContent[r++]})})}},{87:87}],232:[function(e,t,n){"use strict";function o(e){this._sheet=e}o.$inject=["sheet"],t.exports=o,o.prototype.execute=function(e){return e._previousColumn&&(e.column.previous=e._previousColumn),e._nextColumn&&(e.column.next=e._nextColumn),this._sheet.addColumn(e.column),e._previousColumn=e.column.previous,e._nextColumn=e.column.next,e.column},o.prototype.revert=function(e){this._sheet.removeColumn(e.column)}},{}],233:[function(e,t,n){"use strict";function o(e){this._sheet=e}o.$inject=["sheet"],t.exports=o,o.prototype.execute=function(e){return e._previousRow&&(e.row.previous=e._previousRow),e._nextRow&&(e.row.next=e._nextRow),this._sheet.addRow(e.row),e._previousRow=e.row.previous,e._nextRow=e.row.next,e.row},o.prototype.revert=function(e){this._sheet.removeRow(e.row)}},{}],234:[function(e,t,n){"use strict";function o(e,t){this._sheet=e,this._elementRegistry=t}var i=e(87);o.$inject=["sheet","elementRegistry"],t.exports=o,o.prototype.execute=function(e){return e._next=e.column.next,e._previous=e.column.previous,e._cells=this._elementRegistry.filter(function(t){return"cell"===t._type&&t.column===e.column}),this._sheet.removeColumn(e.column),e.column},o.prototype.revert=function(e){e.column.next=e._next,e.column.previous=e._previous,this._sheet.addColumn(e.column);
var t=this;i(e._cells,function(n){t._sheet.setCellContent({row:n.row,column:e.column,content:n.content})})}},{87:87}],235:[function(e,t,n){"use strict";function o(e,t){this._sheet=e,this._elementRegistry=t}var i=e(87);o.$inject=["sheet","elementRegistry"],t.exports=o,o.prototype.execute=function(e){return e._next=e.row.next,e._previous=e.row.previous,e._cells=this._elementRegistry.filter(function(t){return"cell"===t._type&&t.row===e.row}),this._sheet.removeRow(e.row),e.row},o.prototype.revert=function(e){e.row.next=e._next,e.row.previous=e._previous,this._sheet.addRow(e.row);var t=this;i(e._cells,function(n){t._sheet.setCellContent({column:n.column,row:e.row,content:n.content})})}},{87:87}],236:[function(e,t,n){"use strict";function o(e){this._sheet=e}o.$inject=["sheet"],t.exports=o,o.prototype.execute=function(e){return e.oldContent=this._sheet.getCellContent(e),this._sheet.setCellContent(e),e},o.prototype.revert=function(e){return this._sheet.setCellContent({row:e.row,column:e.column,content:e.oldContent}),e}},{}],237:[function(e,t,n){"use strict";function o(e){this._tableName=e}o.$inject=["tableName"],t.exports=o,o.prototype.execute=function(e){return e.oldName=this._tableName.getName(),this._tableName.setName(e.newName),e},o.prototype.revert=function(e){return this._tableName.setName(e.oldName),e}},{}],238:[function(e,t,n){t.exports={__depends__:[e(46),e(214),e(50),e(245)],__init__:["modeling"],modeling:["type",e(230)]}},{214:214,230:230,245:245,46:46,50:50}],239:[function(e,t,n){"use strict";function o(e,t){this._eventBus=e,this._sheet=t;var n=this;this._eventBus.on("table.scroll",function(e){n.close()})}var i=e(87),r=e(176),s=e(187),a=e(188),c=e(185),u=e(184),l=e(192),p="data-id";o.$inject=["eventBus","sheet"],o.prototype.open=function(e){var t=e.className||"tjs-menu",n=e.position,o=e.entries;if(!n)throw new Error("the position argument is missing");if(!o)throw new Error("the entries argument is missing");this.isOpen()&&this.close();var i=document.body,r=this._createContainer(t,n);return this._createEntries(o,r),this._attachContainer(r,i),this._current={container:r,menu:e},this._eventBus.fire("popupmenu.open",this._current),this},o.prototype.close=function(){this.isOpen()&&(this._eventBus.fire("popupmenu.close",this._current),l(this._current.container),this._current=null)},o.prototype.isOpen=function(){return!!this._current},o.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=u(t,p),o=this._getEntry(n);return o.action?o.action.call(null,e,o):void 0},o.prototype.update=function(e,t){"string"==typeof e&&(e=this._getEntry(e)),r(e,t),this.open(this._current.menu)},o.prototype._getEntry=function(e){var t=this._current.menu,n=function(e,t){for(var o=0;o<e.length;o++){if(e[o].id===t)return e[o];if(e[o].content.entries){var i=n(e[o].content.entries,t);if(i)return i}}},o=n(t.entries,e);if(!o)throw new Error("entry not found");return o},o.prototype._createContainer=function(e,t){var n=a('<nav class="tjs-context-menu">');return r(n.style,{position:"absolute",left:t.x+"px",top:t.y+"px"}),c(n).add(e),n},o.prototype._attachContainer=function(e,t){var n=this;s.bind(e,".tjs-entry","click",function(e){n.trigger(e)}),s.bind(e,".tjs-entry","mousedown",function(e){e.preventDefault()}),t.appendChild(e)},o.prototype._createEntries=function(e,t){var n=a('<ul class="tjs-dropdown-menu">'),o=this;i(e,function(e){o._createEntry(e,n)}),t.appendChild(n)},o.prototype._createEntry=function(e,t){if(!e.id)throw new Error("every entry must have the id property set");var n=a('<li class="tjs-entry">'),o=c(n),i=a("<a>"),r=c(i);n.appendChild(i),e.content.className&&o.add(e.content.className),e.content.linkClass&&r.add(e.content.linkClass),u(n,p,e.id);var s=a('<span class="tjs-icon">'),l=c(s);e.content.icon&&l.add(e.content.icon),i.appendChild(s);var d=a('<span class="tjs-label">');i.appendChild(d),e.content.entries?(d.textContent=e.content.label,o.add("tjs-dropdown"),this._createEntries(e.content.entries,n)):(e.content.label&&(d.textContent=e.content.label),e.content.imageUrl&&n.appendChild(a('<img src="'+e.content.imageUrl+'" />')),e.content.active===!0&&o.add("active"),e.content.disabled===!0&&o.add("disabled")),t.appendChild(n)},t.exports=o},{176:176,184:184,185:185,187:187,188:188,192:192,87:87}],240:[function(e,t,n){"use strict";t.exports={__init__:["popupMenu"],popupMenu:["type",e(239)]}},{239:239}],241:[function(e,t,n){"use strict";function o(e,t,n){this.tableName=n,this.node=i('<header><h3 class="tjs-table-name">'+this.tableName+"</h3></header");var o=this;e.on("sheet.init",function(n){t.getContainer().insertBefore(o.node,t.getRootElement()),e.fire("tableName.init",{node:o.node.querySelector("h3")})}),e.on("sheet.destroy",function(n){t.getContainer().removeChild(o.node),e.fire("tableName.destroy",{node:o.node.querySelector("h3")})})}var i=e(188);o.$inject=["eventBus","sheet","config.tableName"],t.exports=o,o.prototype.setName=function(e){this.tableName=e,this.node.querySelector("h3").textContent=e},o.prototype.getName=function(){return this.tableName},o.prototype.getNode=function(){return this.node.querySelector("h3")}},{188:188}],242:[function(e,t,n){"use strict";function o(e,t){this.column=null;var n=this;e.on("sheet.init",function(o){e.fire("utilityColumn.add",o),n.column=t.addColumn({id:"utilityColumn"}),e.fire("utilityColumn.added",{column:n.column})}),e.on("sheet.destroy",function(o){e.fire("utilityColumn.destroy",{column:n.column}),t.removeColumn({id:"utilityColumn"}),e.fire("utilityColumn.destroyed",{column:n.column})})}o.$inject=["eventBus","sheet"],t.exports=o,o.prototype.getColumn=function(){return this.column}},{}],243:[function(e,t,n){"use strict";function o(e,t){e.on("cell.render",function(e){e.data.column!==t.getColumn()||e.data.row.isFoot||(e.gfx.childNodes[0].textContent=e.data.content,i(e.gfx).add(e.data.row.isHead?"hit":"number"))})}var i=e(185);o.$inject=["eventBus","utilityColumn"],t.exports=o},{185:185}],244:[function(e,t,n){"use strict";function o(e,t){r.call(this,e),this._utilityColumn=t}var i=e(80),r=e(48);i(o,r),o.$inject=["eventBus","utilityColumn"],t.exports=o,o.prototype.init=function(){var e=this;this.addRule("cell.edit",function(t){return t.column===e._utilityColumn.getColumn()?!1:void 0})}},{48:48,80:80}],245:[function(e,t,n){t.exports={__init__:["utilityColumn","utilityColumnRules","utilityColumnRenderer"],__depends__:[e(50)],utilityColumn:["type",e(242)],utilityColumnRules:["type",e(244)],utilityColumnRenderer:["type",e(243)]}},{242:242,243:243,244:244,50:50}],246:[function(e,t,n){"use strict";function o(){Object.defineProperty(this,"businessObject",{writable:!0})}function i(){o.call(this)}function r(){o.call(this)}function s(){o.call(this)}var a=e(176),c=e(80);c(i,o),c(r,o),c(s,o);var u={table:i,row:r,column:s};t.exports.create=function(e,t){var n=u[e];if(!n)throw new Error("unknown type: <"+e+">");return a(new n,t)},t.exports.Table=i,t.exports.Row=r,t.exports.Column=s},{176:176,80:80}]},{},[1])(1)});